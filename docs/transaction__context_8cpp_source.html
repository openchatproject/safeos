<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Eos: libraries/chain/transaction_context.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Eos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_94df585d4e205d65756e56c0817a7014.html">chain</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">transaction_context.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="transaction__context_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="apply__context_8hpp.html">eosio/chain/apply_context.hpp</a>&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="transaction__context_8hpp.html">eosio/chain/transaction_context.hpp</a>&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="authorization__manager_8hpp.html">eosio/chain/authorization_manager.hpp</a>&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="exceptions_8hpp.html">eosio/chain/exceptions.hpp</a>&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="resource__limits_8hpp.html">eosio/chain/resource_limits.hpp</a>&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="generated__transaction__object_8hpp.html">eosio/chain/generated_transaction_object.hpp</a>&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="transaction__object_8hpp.html">eosio/chain/transaction_object.hpp</a>&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="global__property__object_8hpp.html">eosio/chain/global_property_object.hpp</a>&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceeosio.html">eosio</a> { <span class="keyword">namespace </span>chain {</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a805902190f8ac4459f98598501024aa2.html#a805902190f8ac4459f98598501024aa2">   12</a></span>&#160;   <a class="code" href="classeosio_1_1chain_1_1transaction__context_a805902190f8ac4459f98598501024aa2.html#a805902190f8ac4459f98598501024aa2">transaction_context::transaction_context</a>( <a class="code" href="classeosio_1_1chain_1_1controller.html">controller</a>&amp; c,</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1signed__transaction.html">signed_transaction</a>&amp; t,</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="namespaceeosio_1_1chain_ac19fb56771d15ea996c2806a46eeaf25.html#ac19fb56771d15ea996c2806a46eeaf25">transaction_id_type</a>&amp; trx_id,</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                             fc::time_point s )</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;   :control(c)</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;   ,trx(t)</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;   ,id(trx_id)</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;   ,undo_session(c.db().start_undo_session(true))</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;   ,trace(<a class="code" href="namespacestd.html">std</a>::make_shared&lt;<a class="code" href="structeosio_1_1chain_1_1transaction__trace.html">transaction_trace</a>&gt;())</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;   ,start(s)</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;   ,net_usage(trace-&gt;net_usage)</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;   ,pseudo_start(s)</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;   {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;id = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">id</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae.html#a1000b2d4028aa08ddfd0b12b4c8fd4ae">executed</a>.reserve( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a7edddb2290e6e875e48ccb50139a6627.html#a7edddb2290e6e875e48ccb50139a6627">total_actions</a>() );</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;      FC_ASSERT( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a6ab61cbdffd907f840c71145c7484e53.html#a6ab61cbdffd907f840c71145c7484e53">transaction_extensions</a>.size() == 0, <span class="stringliteral">&quot;we don&#39;t support any extensions yet&quot;</span> );</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;   }</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;   <span class="keywordtype">void</span> transaction_context::init(uint64_t initial_net_usage )</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;   {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;      FC_ASSERT( !is_initialized, <span class="stringliteral">&quot;cannot initialize twice&quot;</span> );</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;      <span class="keyword">const</span> <span class="keyword">static</span> int64_t large_number_no_overflow = std::numeric_limits&lt;int64_t&gt;::max()/2;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;      <span class="keyword">auto</span>&amp; rl = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a64c47d6803dd1d2068de4da5efe04b8b.html#a64c47d6803dd1d2068de4da5efe04b8b">get_mutable_resource_limits_manager</a>();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      net_limit = rl.get_block_net_limit();</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      objective_duration_limit = fc::microseconds( rl.get_block_cpu_limit() );</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a> + objective_duration_limit;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="comment">// Possibly lower net_limit to the maximum net usage a transaction is allowed to be billed</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      <span class="keywordflow">if</span>( cfg.max_transaction_net_usage &lt;= net_limit ) {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;         net_limit = cfg.max_transaction_net_usage;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;         net_limit_due_to_block = <span class="keyword">false</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="comment">// Possibly lower objective_duration_limit to the maximum cpu usage a transaction is allowed to be billed</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <span class="keywordflow">if</span>( cfg.max_transaction_cpu_usage &lt;= objective_duration_limit.count() ) {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;         objective_duration_limit = fc::microseconds(cfg.max_transaction_cpu_usage);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;         billing_timer_exception_code = tx_cpu_usage_exceeded::code_value;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;         _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a> + objective_duration_limit;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      <span class="comment">// Possibly lower net_limit to optional limit set in the transaction header</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      uint64_t trx_specified_net_usage_limit = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_ae58ad1923cf1bc6b6ee1582bc96c98ee.html#ae58ad1923cf1bc6b6ee1582bc96c98ee">max_net_usage_words</a>.value) * 8;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">if</span>( trx_specified_net_usage_limit &gt; 0 &amp;&amp; trx_specified_net_usage_limit &lt;= net_limit ) {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         net_limit = trx_specified_net_usage_limit;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;         net_limit_due_to_block = <span class="keyword">false</span>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      }</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="comment">// Possibly lower objective_duration_limit to optional limit set in transaction header</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_a5aff4778a70f56f39242102064b34092.html#a5aff4778a70f56f39242102064b34092">max_cpu_usage_ms</a> &gt; 0 ) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;         <span class="keyword">auto</span> trx_specified_cpu_usage_limit = fc::milliseconds(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_a5aff4778a70f56f39242102064b34092.html#a5aff4778a70f56f39242102064b34092">max_cpu_usage_ms</a>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;         <span class="keywordflow">if</span>( trx_specified_cpu_usage_limit &lt;= objective_duration_limit ) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            objective_duration_limit = trx_specified_cpu_usage_limit;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            billing_timer_exception_code = tx_cpu_usage_exceeded::code_value;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a> + objective_duration_limit;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;         }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> &gt; 0 )</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;         validate_cpu_usage_to_bill( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a>, <span class="keyword">false</span> ); <span class="comment">// Fail early if the amount to be billed is too high</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="comment">// Record accounts to be billed for network and CPU usage</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a768465b5929ca1291b303294f353b1c5.html#a768465b5929ca1291b303294f353b1c5">actions</a> ) {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : act.authorization ) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a>.insert( auth.actor );</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;         }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab627b00cf01d10335453aa63eecb2eac.html#ab627b00cf01d10335453aa63eecb2eac">validate_ram_usage</a>.reserve( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a>.size() );</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="comment">// Update usage values of accounts to reflect new time</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      rl.update_account_usage( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a>, <a class="code" href="namespaceeosio_1_1chain_a05999e84d4aa13227dcdd77bcd6c6b9e.html#a05999e84d4aa13227dcdd77bcd6c6b9e">block_timestamp_type</a>(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>()).slot );</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="comment">// Calculate the highest network usage and CPU time that all of the billed accounts can afford to be billed</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      int64_t account_net_limit = large_number_no_overflow;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      int64_t account_cpu_limit = large_number_no_overflow;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; a : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a> ) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;         <span class="keyword">auto</span> net_limit = rl.get_account_net_limit(a);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;         <span class="keywordflow">if</span>( net_limit &gt;= 0 )</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            account_net_limit = std::min( account_net_limit, net_limit );</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;         <span class="keyword">auto</span> cpu_limit = rl.get_account_cpu_limit(a);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;         <span class="keywordflow">if</span>( cpu_limit &gt;= 0 )</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            account_cpu_limit = std::min( account_cpu_limit, cpu_limit );</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      eager_net_limit = net_limit;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// Possible lower eager_net_limit to what the billed accounts can pay plus some (objective) leeway</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keyword">auto</span> new_eager_net_limit = std::min( eager_net_limit, static_cast&lt;uint64_t&gt;(account_net_limit + cfg.net_usage_leeway) );</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="keywordflow">if</span>( new_eager_net_limit &lt; eager_net_limit ) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         eager_net_limit = new_eager_net_limit;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         net_limit_due_to_block = <span class="keyword">false</span>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// Possibly limit deadline if the duration accounts can be billed for (+ a subjective leeway) does not exceed current delta</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keywordflow">if</span>( (fc::microseconds(account_cpu_limit) + <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa6a12dbf5b9aae9e9587f8423abbb184.html#aa6a12dbf5b9aae9e9587f8423abbb184">leeway</a>) &lt;= (_deadline - <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>) ) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a> + fc::microseconds(account_cpu_limit) + <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa6a12dbf5b9aae9e9587f8423abbb184.html#aa6a12dbf5b9aae9e9587f8423abbb184">leeway</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         billing_timer_exception_code = leeway_deadline_exception::code_value;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      billing_timer_duration_limit = _deadline - <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="comment">// Check if deadline is limited by caller-set deadline (only change deadline if billed_cpu_time_us is not set)</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> &gt; 0 || <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84.html#aa742e22c5db211de09058a17744e1b84">deadline</a> &lt; _deadline ) {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84.html#aa742e22c5db211de09058a17744e1b84">deadline</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;         deadline_exception_code = deadline_exception::code_value;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;         deadline_exception_code = billing_timer_exception_code;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      eager_net_limit = (eager_net_limit/8)*8; <span class="comment">// Round down to nearest multiple of word size (8 bytes) so check_net_usage can be efficient</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span>( initial_net_usage &gt; 0 )</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;         <a class="code" href="classeosio_1_1chain_1_1transaction__context_a02dc2ed4e4c753fcc74376a2254fa400.html#a02dc2ed4e4c753fcc74376a2254fa400">add_net_usage</a>( initial_net_usage );  <span class="comment">// Fail early if current net usage is already greater than the calculated limit</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">checktime</a>(); <span class="comment">// Fail early if deadline has already been exceeded</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      is_initialized = <span class="keyword">true</span>;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a9c23f0fbb2d058fe307f9c9844ad0d22.html#a9c23f0fbb2d058fe307f9c9844ad0d22">  134</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a9c23f0fbb2d058fe307f9c9844ad0d22.html#a9c23f0fbb2d058fe307f9c9844ad0d22">transaction_context::init_for_implicit_trx</a>( uint64_t initial_net_usage  )</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">published</a> = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      init( initial_net_usage );</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a689c5a49677bcfe80a7ca92ac71019af.html#a689c5a49677bcfe80a7ca92ac71019af">  140</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a689c5a49677bcfe80a7ca92ac71019af.html#a689c5a49677bcfe80a7ca92ac71019af">transaction_context::init_for_input_trx</a>( uint64_t packed_trx_unprunable_size,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                                 uint64_t packed_trx_prunable_size,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                                 uint32_t num_signatures              )</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      uint64_t discounted_size_for_pruned_data = packed_trx_prunable_size;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keywordflow">if</span>( cfg.context_free_discount_net_usage_den &gt; 0</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;          &amp;&amp; cfg.context_free_discount_net_usage_num &lt; cfg.context_free_discount_net_usage_den )</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         discounted_size_for_pruned_data *= cfg.<a class="code" href="structeosio_1_1chain_1_1chain__config_a5b3d6aa8996d533210c5389103d28960.html#a5b3d6aa8996d533210c5389103d28960">context_free_discount_net_usage_num</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         discounted_size_for_pruned_data =  ( discounted_size_for_pruned_data + cfg.context_free_discount_net_usage_den - 1)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                                                                    / cfg.context_free_discount_net_usage_den; <span class="comment">// rounds up</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      uint64_t initial_net_usage = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(cfg.base_per_transaction_net_usage)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                                    + packed_trx_unprunable_size + discounted_size_for_pruned_data;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_ab8660b12406a0a44ac5bae81a912ed42.html#ab8660b12406a0a44ac5bae81a912ed42">delay_sec</a>.value &gt; 0 ) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;          <span class="comment">// If delayed, also charge ahead of time for the additional net usage needed to retire the delayed transaction</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;          <span class="comment">// whether that be by successfully executing, soft failure, hard failure, or expiration.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         initial_net_usage += <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(cfg.base_per_transaction_net_usage)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                               + static_cast&lt;uint64_t&gt;(config::transaction_id_net_usage);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">published</a> = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>();</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_ad6eccde879e7934d348b7cf6ee2b44a7.html#ad6eccde879e7934d348b7cf6ee2b44a7">is_input</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a50ff8d45254fc4e3464fda2b87b78847.html#a50ff8d45254fc4e3464fda2b87b78847">validate_expiration</a>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a> );</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_aa247bdb7f6be53fd85d960c18972d972.html#aa247bdb7f6be53fd85d960c18972d972">validate_tapos</a>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a> );</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_af046b9bd6a679a4a28cab4a3f46f2d8c.html#af046b9bd6a679a4a28cab4a3f46f2d8c">validate_referenced_accounts</a>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a> );</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      init( initial_net_usage );</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      record_transaction( <span class="keywordtype">id</span>, <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_acb8d4b05d574db9550dda7ae24f62d3e.html#acb8d4b05d574db9550dda7ae24f62d3e">expiration</a> ); </div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a102f397f578b19da8e4e3b8dc28e68b6.html#a102f397f578b19da8e4e3b8dc28e68b6">  175</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a102f397f578b19da8e4e3b8dc28e68b6.html#a102f397f578b19da8e4e3b8dc28e68b6">transaction_context::init_for_deferred_trx</a>( fc::time_point p )</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">published</a> = p;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;scheduled = <span class="keyword">true</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_ae108738c80290c7e6ef2b68d952c68a6.html#ae108738c80290c7e6ef2b68d952c68a6">apply_context_free</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      init( 0 );</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   }</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a229f76591eff94b812867cc1096fd9d9.html#a229f76591eff94b812867cc1096fd9d9">  183</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a229f76591eff94b812867cc1096fd9d9.html#a229f76591eff94b812867cc1096fd9d9">transaction_context::exec</a>() {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      FC_ASSERT( is_initialized, <span class="stringliteral">&quot;must first initialize&quot;</span> );</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_ae108738c80290c7e6ef2b68d952c68a6.html#ae108738c80290c7e6ef2b68d952c68a6">apply_context_free</a> ) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a72659cea5d663a72934976c95ef151bc.html#a72659cea5d663a72934976c95ef151bc">context_free_actions</a> ) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;action_traces.emplace_back();</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            dispatch_action( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;action_traces.back(), act, true );</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_ad60b29c3c2ca3b0cc4f15f7687d63ce6.html#ad60b29c3c2ca3b0cc4f15f7687d63ce6">delay</a> == fc::microseconds() ) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a768465b5929ca1291b303294f353b1c5.html#a768465b5929ca1291b303294f353b1c5">actions</a> ) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;action_traces.emplace_back();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            dispatch_action( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;action_traces.back(), act );</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         schedule_transaction();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a73b4a1fcaf1d79d02c758453980fcf41.html#a73b4a1fcaf1d79d02c758453980fcf41">  203</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a73b4a1fcaf1d79d02c758453980fcf41.html#a73b4a1fcaf1d79d02c758453980fcf41">transaction_context::finalize</a>() {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      FC_ASSERT( is_initialized, <span class="stringliteral">&quot;must first initialize&quot;</span> );</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keyword">const</span> <span class="keyword">static</span> int64_t large_number_no_overflow = std::numeric_limits&lt;int64_t&gt;::max()/2;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_ad6eccde879e7934d348b7cf6ee2b44a7.html#ad6eccde879e7934d348b7cf6ee2b44a7">is_input</a> ) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         <span class="keyword">auto</span>&amp; am = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_afd0cfc2a2e5adc0964d3591073931d30.html#afd0cfc2a2e5adc0964d3591073931d30">get_mutable_authorization_manager</a>();</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a768465b5929ca1291b303294f353b1c5.html#a768465b5929ca1291b303294f353b1c5">actions</a> ) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : act.authorization ) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;               am.<a class="code" href="classeosio_1_1chain_1_1authorization__manager_a2cbd47dc471035cccd8e415617491153.html#a2cbd47dc471035cccd8e415617491153">update_permission_usage</a>( am.get_permission(auth) );</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keyword">auto</span>&amp; rl = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a64c47d6803dd1d2068de4da5efe04b8b.html#a64c47d6803dd1d2068de4da5efe04b8b">get_mutable_resource_limits_manager</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">for</span>( <span class="keyword">auto</span> a : <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab627b00cf01d10335453aa63eecb2eac.html#ab627b00cf01d10335453aa63eecb2eac">validate_ram_usage</a> ) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         rl.<a class="code" href="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a0e777aedcff5772d317ff6b56c7b655b.html#a0e777aedcff5772d317ff6b56c7b655b">verify_account_ram_usage</a>( a );</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">// Calculate the new highest network usage and CPU time that all of the billed accounts can afford to be billed</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      int64_t account_net_limit = large_number_no_overflow;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      int64_t account_cpu_limit = large_number_no_overflow;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; a : <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a> ) {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         <span class="keyword">auto</span> net_limit = rl.get_account_net_limit(a);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <span class="keywordflow">if</span>( net_limit &gt;= 0 )</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            account_net_limit = std::min( account_net_limit, net_limit );</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;         <span class="keyword">auto</span> cpu_limit = rl.get_account_cpu_limit(a);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         <span class="keywordflow">if</span>( cpu_limit &gt;= 0 )</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            account_cpu_limit = std::min( account_cpu_limit, cpu_limit );</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">// Possibly lower net_limit to what the billed accounts can pay</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">if</span>( static_cast&lt;uint64_t&gt;(account_net_limit) &lt;= net_limit ) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         net_limit = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(account_net_limit);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         net_limit_due_to_block = <span class="keyword">false</span>;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// Possibly lower objective_duration_limit to what the billed accounts can pay</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span>( account_cpu_limit &lt;= objective_duration_limit.count() ) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;         objective_duration_limit = fc::microseconds(account_cpu_limit);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         billing_timer_exception_code = tx_cpu_usage_exceeded::code_value;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      net_usage = ((net_usage + 7)/8)*8; <span class="comment">// Round up to nearest multiple of word size (8 bytes)</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      eager_net_limit = net_limit;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab6a873d5c59f9e35fb8e761005b8df73.html#ab6a873d5c59f9e35fb8e761005b8df73">check_net_usage</a>();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keyword">auto</span> now = fc::time_point::now();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a>-&gt;elapsed = now - <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> == 0 ) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> = std::max( (now - pseudo_start).count(), static_cast&lt;int64_t&gt;(cfg.min_transaction_cpu_usage) );</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      validate_cpu_usage_to_bill( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> );</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      rl.add_transaction_usage( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">bill_to_accounts</a>, static_cast&lt;uint64_t&gt;(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a>), net_usage,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                <a class="code" href="namespaceeosio_1_1chain_a05999e84d4aa13227dcdd77bcd6c6b9e.html#a05999e84d4aa13227dcdd77bcd6c6b9e">block_timestamp_type</a>(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>()).slot ); <span class="comment">// Should never fail</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a08f8858cab5409e4a4e2fd9afdb79ab2.html#a08f8858cab5409e4a4e2fd9afdb79ab2">  264</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a08f8858cab5409e4a4e2fd9afdb79ab2.html#a08f8858cab5409e4a4e2fd9afdb79ab2">transaction_context::squash</a>() {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a80057da44d2adacd640ab4c9ac473aab.html#a80057da44d2adacd640ab4c9ac473aab">undo_session</a>.squash();</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_ab6a873d5c59f9e35fb8e761005b8df73.html#ab6a873d5c59f9e35fb8e761005b8df73">  269</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab6a873d5c59f9e35fb8e761005b8df73.html#ab6a873d5c59f9e35fb8e761005b8df73">transaction_context::check_net_usage</a>()<span class="keyword">const </span>{</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">if</span>( BOOST_UNLIKELY(net_usage &gt; eager_net_limit) ) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <span class="keywordflow">if</span>( net_limit_due_to_block ) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( block_net_usage_exceeded,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                       <span class="stringliteral">&quot;not enough space left in block: ${net_usage} &gt; ${net_limit}&quot;</span>,</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                       (<span class="stringliteral">&quot;net_usage&quot;</span>, net_usage)(<span class="stringliteral">&quot;net_limit&quot;</span>, eager_net_limit) );</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( tx_net_usage_exceeded,</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                       <span class="stringliteral">&quot;net usage of transaction is too high: ${net_usage} &gt; ${net_limit}&quot;</span>,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                       (<span class="stringliteral">&quot;net_usage&quot;</span>, net_usage)(<span class="stringliteral">&quot;net_limit&quot;</span>, eager_net_limit) );</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      }</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   }</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">  283</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">transaction_context::checktime</a>()<span class="keyword">const </span>{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keyword">auto</span> now = fc::time_point::now();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">if</span>( BOOST_UNLIKELY( now &gt; _deadline ) ) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;         <span class="comment">// edump((now-start)(now-pseudo_start));</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> &gt; 0 || deadline_exception_code == deadline_exception::code_value ) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( deadline_exception, <span class="stringliteral">&quot;deadline exceeded&quot;</span>, (<span class="stringliteral">&quot;now&quot;</span>, now)(<span class="stringliteral">&quot;deadline&quot;</span>, _deadline)(<span class="stringliteral">&quot;start&quot;</span>, <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>) );</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( deadline_exception_code == block_cpu_usage_exceeded::code_value ) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( block_cpu_usage_exceeded,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                       <span class="stringliteral">&quot;not enough time left in block to complete executing transaction&quot;</span>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                       (<span class="stringliteral">&quot;now&quot;</span>, now)(<span class="stringliteral">&quot;deadline&quot;</span>, _deadline)(<span class="stringliteral">&quot;start&quot;</span>, <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>) );</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( deadline_exception_code == tx_cpu_usage_exceeded::code_value ) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( tx_cpu_usage_exceeded,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                       <span class="stringliteral">&quot;transaction was executing for too long&quot;</span>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                       (<span class="stringliteral">&quot;now&quot;</span>, now)(<span class="stringliteral">&quot;deadline&quot;</span>, _deadline)(<span class="stringliteral">&quot;start&quot;</span>, <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>) );</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( deadline_exception_code == leeway_deadline_exception::code_value ) {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <a class="code" href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a>( leeway_deadline_exception,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                       <span class="stringliteral">&quot;the transaction was unable to complete by deadline, &quot;</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                       <span class="stringliteral">&quot;but it is possible it could have succeeded if it were allow to run to completion&quot;</span>,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                       (<span class="stringliteral">&quot;now&quot;</span>, now)(<span class="stringliteral">&quot;deadline&quot;</span>, _deadline)(<span class="stringliteral">&quot;start&quot;</span>, <a class="code" href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">start</a>) );</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         FC_ASSERT( <span class="keyword">false</span>, <span class="stringliteral">&quot;unexpected deadline exception code&quot;</span> );</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a68e99023f783c078c4344869b412a8a5.html#a68e99023f783c078c4344869b412a8a5">  307</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a68e99023f783c078c4344869b412a8a5.html#a68e99023f783c078c4344869b412a8a5">transaction_context::pause_billing_timer</a>() {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> &gt; 0 || pseudo_start == fc::time_point() ) <span class="keywordflow">return</span>; <span class="comment">// either irrelevant or already paused</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keyword">auto</span> now = fc::time_point::now();</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      billed_time = now - pseudo_start;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      deadline_exception_code = deadline_exception::code_value; <span class="comment">// Other timeout exceptions cannot be thrown while billable timer is paused.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      pseudo_start = fc::time_point();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a8b98824293d35b44770c21675a5cf0c4.html#a8b98824293d35b44770c21675a5cf0c4">  316</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8b98824293d35b44770c21675a5cf0c4.html#a8b98824293d35b44770c21675a5cf0c4">transaction_context::resume_billing_timer</a>() {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">billed_cpu_time_us</a> &gt; 0 || pseudo_start != fc::time_point() ) <span class="keywordflow">return</span>; <span class="comment">// either irrelevant or already running</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keyword">auto</span> now = fc::time_point::now();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      pseudo_start = now - billed_time;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span>( (pseudo_start + billing_timer_duration_limit) &lt;= <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84.html#aa742e22c5db211de09058a17744e1b84">deadline</a> ) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         _deadline = pseudo_start + billing_timer_duration_limit;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         deadline_exception_code = billing_timer_exception_code;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;         _deadline = <a class="code" href="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84.html#aa742e22c5db211de09058a17744e1b84">deadline</a>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         deadline_exception_code = deadline_exception::code_value;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordtype">void</span> transaction_context::validate_cpu_usage_to_bill( int64_t billed_us, <span class="keywordtype">bool</span> check_minimum )<span class="keyword">const </span>{</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span>( check_minimum ) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( billed_us &gt;= cfg.min_transaction_cpu_usage, <a class="code" href="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf.html#ad6e015097a10f08028a3e3df3b17ecdf">transaction_exception</a>,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                     <span class="stringliteral">&quot;cannot bill CPU time less than the minimum of ${min_billable} us&quot;</span>,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                     (<span class="stringliteral">&quot;min_billable&quot;</span>, cfg.min_transaction_cpu_usage)(<span class="stringliteral">&quot;billed_cpu_time_us&quot;</span>, billed_us)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                   );</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">if</span>( billing_timer_exception_code == block_cpu_usage_exceeded::code_value ) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( billed_us &lt;= objective_duration_limit.count(),</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                     block_cpu_usage_exceeded,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                     <span class="stringliteral">&quot;billed CPU time (${billed} us) is greater than the billable CPU time left in the block (${billable} us)&quot;</span>,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                     (<span class="stringliteral">&quot;billed&quot;</span>, billed_us)(<span class="stringliteral">&quot;billable&quot;</span>, objective_duration_limit.count())</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                   );</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;         <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( billed_us &lt;= objective_duration_limit.count(),</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                     tx_cpu_usage_exceeded,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                     <span class="stringliteral">&quot;billed CPU time (${billed} us) is greater than the maximum billable CPU time for the transaction (${billable} us)&quot;</span>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                     (<span class="stringliteral">&quot;billed&quot;</span>, billed_us)(<span class="stringliteral">&quot;billable&quot;</span>, objective_duration_limit.count())</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                   );</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1transaction__context_a6e36ac6e35f4a0a2add2875039cc0d91.html#a6e36ac6e35f4a0a2add2875039cc0d91">  354</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1transaction__context_a6e36ac6e35f4a0a2add2875039cc0d91.html#a6e36ac6e35f4a0a2add2875039cc0d91">transaction_context::add_ram_usage</a>( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> account, int64_t ram_delta ) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keyword">auto</span>&amp; rl = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a64c47d6803dd1d2068de4da5efe04b8b.html#a64c47d6803dd1d2068de4da5efe04b8b">get_mutable_resource_limits_manager</a>();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      rl.<a class="code" href="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a221e58d79e2b684714cb1acc19da5492.html#a221e58d79e2b684714cb1acc19da5492">add_pending_ram_usage</a>( account, ram_delta );</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">if</span>( ram_delta &gt; 0 ) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         <a class="code" href="classeosio_1_1chain_1_1transaction__context_ab627b00cf01d10335453aa63eecb2eac.html#ab627b00cf01d10335453aa63eecb2eac">validate_ram_usage</a>.insert( account );</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      }</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   }</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordtype">void</span> transaction_context::dispatch_action( <a class="code" href="structeosio_1_1chain_1_1action__trace.html">action_trace</a>&amp; trace, <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1action.html">action</a>&amp; a, <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> receiver, <span class="keywordtype">bool</span> context_free, uint32_t recurse_depth ) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context.html">apply_context</a>  acontext( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>, *<span class="keyword">this</span>, a, recurse_depth );</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      acontext.context_free = context_free;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      acontext.receiver     = receiver;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         acontext.exec();</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      } <span class="keywordflow">catch</span>( ... ) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a> = move(acontext.trace);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;         <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">trace</a> = move(acontext.trace);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordtype">void</span> transaction_context::schedule_transaction() {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="comment">// Charge ahead of time for the additional net usage needed to retire the delayed transaction</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="comment">// whether that be by successfully executing, soft failure, hard failure, or expiration.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction__header_ab8660b12406a0a44ac5bae81a912ed42.html#ab8660b12406a0a44ac5bae81a912ed42">delay_sec</a>.value == 0 ) { <span class="comment">// Do not double bill. Only charge if we have not already charged for the delay.</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         <a class="code" href="classeosio_1_1chain_1_1transaction__context_a02dc2ed4e4c753fcc74376a2254fa400.html#a02dc2ed4e4c753fcc74376a2254fa400">add_net_usage</a>( static_cast&lt;uint64_t&gt;(cfg.base_per_transaction_net_usage)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                         + static_cast&lt;uint64_t&gt;(config::transaction_id_net_usage) ); <span class="comment">// Will exit early if net usage cannot be payed.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keyword">auto</span> first_auth = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a>.<a class="code" href="structeosio_1_1chain_1_1transaction_a6637d0dfe66b8927ff2edc19b6825358.html#a6637d0dfe66b8927ff2edc19b6825358">first_authorizor</a>();</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      uint32_t trx_size = 0;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cgto = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">db</a>().create&lt;generated_transaction_object&gt;( [&amp;]( <span class="keyword">auto</span>&amp; gto ) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        gto.trx_id      = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">id</a>;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        gto.payer       = first_auth;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        gto.sender      = <a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a>(); </div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        gto.sender_id   = <a class="code" href="namespaceeosio_1_1chain_a81958cc1618387067d22f6d72a21f96c.html#a81958cc1618387067d22f6d72a21f96c">transaction_id_to_sender_id</a>( gto.trx_id );</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        gto.published   = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>();</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        gto.delay_until = gto.published + <a class="code" href="classeosio_1_1chain_1_1transaction__context_ad60b29c3c2ca3b0cc4f15f7687d63ce6.html#ad60b29c3c2ca3b0cc4f15f7687d63ce6">delay</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        gto.expiration  = gto.delay_until + fc::seconds(<a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration.<a class="code" href="structeosio_1_1chain_1_1chain__config_ac6d2577e87fe8ccad84f7a0549b0f638.html#ac6d2577e87fe8ccad84f7a0549b0f638">deferred_trx_expiration_window</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        trx_size = gto.set( <a class="code" href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">trx</a> );</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      });</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1transaction__context_a6e36ac6e35f4a0a2add2875039cc0d91.html#a6e36ac6e35f4a0a2add2875039cc0d91">add_ram_usage</a>( cgto.payer, (config::billable_size_v&lt;generated_transaction_object&gt; + trx_size) );</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordtype">void</span> transaction_context::record_transaction( <span class="keyword">const</span> <a class="code" href="namespaceeosio_1_1chain_ac19fb56771d15ea996c2806a46eeaf25.html#ac19fb56771d15ea996c2806a46eeaf25">transaction_id_type</a>&amp; <span class="keywordtype">id</span>, fc::time_point_sec expire ) {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">try</span> {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;          <a class="code" href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">db</a>().create&lt;transaction_object&gt;([&amp;](transaction_object&amp; transaction) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;              transaction.trx_id = <a class="code" href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">id</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;              transaction.expiration = expire;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;          });</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      } <span class="keywordflow">catch</span>( <span class="keyword">const</span> boost::interprocess::bad_alloc&amp; ) {</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      } <span class="keywordflow">catch</span> ( ... ) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;          <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <span class="keyword">false</span>, tx_duplicate,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                     <span class="stringliteral">&quot;duplicate transaction ${id}&quot;</span>, (<span class="stringliteral">&quot;id&quot;</span>, <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   } </div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;} } </div><div class="ttc" id="classeosio_1_1chain_1_1controller_a50ff8d45254fc4e3464fda2b87b78847_html_a50ff8d45254fc4e3464fda2b87b78847"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a50ff8d45254fc4e3464fda2b87b78847.html#a50ff8d45254fc4e3464fda2b87b78847">eosio::chain::controller::validate_expiration</a></div><div class="ttdeci">void validate_expiration(const transaction &amp;t) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01438">controller.cpp:1438</a></div></div>
<div class="ttc" id="namespaceeosio_html"><div class="ttname"><a href="namespaceeosio.html">eosio</a></div><div class="ttdef"><b>Definition:</b> <a href="abi__serializer_8cpp_source.html#l00017">abi_serializer.cpp:17</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_html"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context.html">eosio::chain::apply_context</a></div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00021">apply_context.hpp:21</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ab6a873d5c59f9e35fb8e761005b8df73_html_ab6a873d5c59f9e35fb8e761005b8df73"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ab6a873d5c59f9e35fb8e761005b8df73.html#ab6a873d5c59f9e35fb8e761005b8df73">eosio::chain::transaction_context::check_net_usage</a></div><div class="ttdeci">void check_net_usage() const</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00269">transaction_context.cpp:269</a></div></div>
<div class="ttc" id="transaction__object_8hpp_html"><div class="ttname"><a href="transaction__object_8hpp.html">transaction_object.hpp</a></div></div>
<div class="ttc" id="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7_html_a7005d90fa96c369aee383c5688ab91d7"><div class="ttname"><a href="exceptions_8hpp_a7005d90fa96c369aee383c5688ab91d7.html#a7005d90fa96c369aee383c5688ab91d7">EOS_THROW</a></div><div class="ttdeci">#define EOS_THROW(exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00018">exceptions.hpp:18</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction__header_ae58ad1923cf1bc6b6ee1582bc96c98ee_html_ae58ad1923cf1bc6b6ee1582bc96c98ee"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction__header_ae58ad1923cf1bc6b6ee1582bc96c98ee.html#ae58ad1923cf1bc6b6ee1582bc96c98ee">eosio::chain::transaction_header::max_net_usage_words</a></div><div class="ttdeci">fc::unsigned_int max_net_usage_words</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00034">transaction.hpp:34</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1chain__config_a5b3d6aa8996d533210c5389103d28960_html_a5b3d6aa8996d533210c5389103d28960"><div class="ttname"><a href="structeosio_1_1chain_1_1chain__config_a5b3d6aa8996d533210c5389103d28960.html#a5b3d6aa8996d533210c5389103d28960">eosio::chain::chain_config::context_free_discount_net_usage_num</a></div><div class="ttdeci">uint32_t context_free_discount_net_usage_num</div><div class="ttdoc">the numerator for the discount on net usage of context-free data </div><div class="ttdef"><b>Definition:</b> <a href="chain__config_8hpp_source.html#l00025">chain_config.hpp:25</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a805902190f8ac4459f98598501024aa2_html_a805902190f8ac4459f98598501024aa2"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a805902190f8ac4459f98598501024aa2.html#a805902190f8ac4459f98598501024aa2">eosio::chain::transaction_context::transaction_context</a></div><div class="ttdeci">transaction_context(controller &amp;c, const signed_transaction &amp;t, const transaction_id_type &amp;trx_id, fc::time_point start=fc::time_point::now())</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00012">transaction_context.cpp:12</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction__header_ab8660b12406a0a44ac5bae81a912ed42_html_ab8660b12406a0a44ac5bae81a912ed42"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction__header_ab8660b12406a0a44ac5bae81a912ed42.html#ab8660b12406a0a44ac5bae81a912ed42">eosio::chain::transaction_header::delay_sec</a></div><div class="ttdeci">fc::unsigned_int delay_sec</div><div class="ttdoc">upper limit on the total CPU time billed for this transaction </div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00036">transaction.hpp:36</a></div></div>
<div class="ttc" id="exceptions_8hpp_html"><div class="ttname"><a href="exceptions_8hpp.html">exceptions.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980_html_a62fe34eb4a518b8bdfd59b7ebe6b6980"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a62fe34eb4a518b8bdfd59b7ebe6b6980.html#a62fe34eb4a518b8bdfd59b7ebe6b6980">eosio::chain::transaction_context::start</a></div><div class="ttdeci">fc::time_point start</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00063">transaction_context.hpp:63</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a81958cc1618387067d22f6d72a21f96c_html_a81958cc1618387067d22f6d72a21f96c"><div class="ttname"><a href="namespaceeosio_1_1chain_a81958cc1618387067d22f6d72a21f96c.html#a81958cc1618387067d22f6d72a21f96c">eosio::chain::transaction_id_to_sender_id</a></div><div class="ttdeci">uint128_t transaction_id_to_sender_id(const transaction_id_type &amp;tid)</div><div class="ttdef"><b>Definition:</b> <a href="eosio__contract_8cpp_source.html#l00031">eosio_contract.cpp:31</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1chain__config_ac6d2577e87fe8ccad84f7a0549b0f638_html_ac6d2577e87fe8ccad84f7a0549b0f638"><div class="ttname"><a href="structeosio_1_1chain_1_1chain__config_ac6d2577e87fe8ccad84f7a0549b0f638.html#ac6d2577e87fe8ccad84f7a0549b0f638">eosio::chain::chain_config::deferred_trx_expiration_window</a></div><div class="ttdeci">uint32_t deferred_trx_expiration_window</div><div class="ttdoc">the number of seconds after the time a deferred transaction can first execute until it expires ...</div><div class="ttdef"><b>Definition:</b> <a href="chain__config_8hpp_source.html#l00034">chain_config.hpp:34</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__trace_html"><div class="ttname"><a href="structeosio_1_1chain_1_1action__trace.html">eosio::chain::action_trace</a></div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00027">trace.hpp:27</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a221e58d79e2b684714cb1acc19da5492_html_a221e58d79e2b684714cb1acc19da5492"><div class="ttname"><a href="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a221e58d79e2b684714cb1acc19da5492.html#a221e58d79e2b684714cb1acc19da5492">eosio::chain::resource_limits::resource_limits_manager::add_pending_ram_usage</a></div><div class="ttdeci">void add_pending_ram_usage(const account_name account, int64_t ram_delta)</div><div class="ttdef"><b>Definition:</b> <a href="resource__limits_8cpp_source.html#l00160">resource_limits.cpp:160</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="name_8hpp_source.html#l00102">name.hpp:102</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_a768465b5929ca1291b303294f353b1c5_html_a768465b5929ca1291b303294f353b1c5"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction_a768465b5929ca1291b303294f353b1c5.html#a768465b5929ca1291b303294f353b1c5">eosio::chain::transaction::actions</a></div><div class="ttdeci">vector&lt; action &gt; actions</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00056">transaction.hpp:56</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction__trace_html"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction__trace.html">eosio::chain::transaction_trace</a></div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00036">trace.hpp:36</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a80057da44d2adacd640ab4c9ac473aab_html_a80057da44d2adacd640ab4c9ac473aab"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a80057da44d2adacd640ab4c9ac473aab.html#a80057da44d2adacd640ab4c9ac473aab">eosio::chain::transaction_context::undo_session</a></div><div class="ttdeci">chainbase::database::session undo_session</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00061">transaction_context.hpp:61</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a05999e84d4aa13227dcdd77bcd6c6b9e_html_a05999e84d4aa13227dcdd77bcd6c6b9e"><div class="ttname"><a href="namespaceeosio_1_1chain_a05999e84d4aa13227dcdd77bcd6c6b9e.html#a05999e84d4aa13227dcdd77bcd6c6b9e">eosio::chain::block_timestamp_type</a></div><div class="ttdeci">block_timestamp&lt; config::block_interval_ms, config::block_timestamp_epoch &gt; block_timestamp_type</div><div class="ttdef"><b>Definition:</b> <a href="block__timestamp_8hpp_source.html#l00075">block_timestamp.hpp:75</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84_html_aa742e22c5db211de09058a17744e1b84"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_aa742e22c5db211de09058a17744e1b84.html#aa742e22c5db211de09058a17744e1b84">eosio::chain::transaction_context::deadline</a></div><div class="ttdeci">fc::time_point deadline</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00079">transaction_context.hpp:79</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a64c47d6803dd1d2068de4da5efe04b8b_html_a64c47d6803dd1d2068de4da5efe04b8b"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a64c47d6803dd1d2068de4da5efe04b8b.html#a64c47d6803dd1d2068de4da5efe04b8b">eosio::chain::controller::get_mutable_resource_limits_manager</a></div><div class="ttdeci">resource_limits_manager &amp; get_mutable_resource_limits_manager()</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01115">controller.cpp:1115</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62_html_ab342238f129ee20abed3257c6d023b62"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">eosio::chain::transaction_context::checktime</a></div><div class="ttdeci">void checktime() const</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00283">transaction_context.cpp:283</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_ac19fb56771d15ea996c2806a46eeaf25_html_ac19fb56771d15ea996c2806a46eeaf25"><div class="ttname"><a href="namespaceeosio_1_1chain_ac19fb56771d15ea996c2806a46eeaf25.html#ac19fb56771d15ea996c2806a46eeaf25">eosio::chain::transaction_id_type</a></div><div class="ttdeci">checksum_type transaction_id_type</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00164">types.hpp:164</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a229f76591eff94b812867cc1096fd9d9_html_a229f76591eff94b812867cc1096fd9d9"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a229f76591eff94b812867cc1096fd9d9.html#a229f76591eff94b812867cc1096fd9d9">eosio::chain::transaction_context::exec</a></div><div class="ttdeci">void exec()</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00183">transaction_context.cpp:183</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a_html_a675086138c644442ef3a084e027a7d5a"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">eosio::chain::controller::pending_block_time</a></div><div class="ttdeci">time_point pending_block_time() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01216">controller.cpp:1216</a></div></div>
<div class="ttc" id="global__property__object_8hpp_html"><div class="ttname"><a href="global__property__object_8hpp.html">global_property_object.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61_html_a9930df49c104d3bf80199c7bb8e6dd61"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">eosio::chain::transaction_context::id</a></div><div class="ttdeci">transaction_id_type id</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00060">transaction_context.hpp:60</a></div></div>
<div class="ttc" id="transaction__context_8hpp_html"><div class="ttname"><a href="transaction__context_8hpp.html">transaction_context.hpp</a></div></div>
<div class="ttc" id="resource__limits_8hpp_html"><div class="ttname"><a href="resource__limits_8hpp.html">resource_limits.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87_html_a30cff57349399035ecde0e58c9378b87"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">eosio::chain::transaction_context::published</a></div><div class="ttdeci">fc::time_point published</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00065">transaction_context.hpp:65</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action_html"><div class="ttname"><a href="structeosio_1_1chain_1_1action.html">eosio::chain::action</a></div><div class="ttdef"><b>Definition:</b> <a href="action_8hpp_source.html#l00059">action.hpp:59</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_aa247bdb7f6be53fd85d960c18972d972_html_aa247bdb7f6be53fd85d960c18972d972"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_aa247bdb7f6be53fd85d960c18972d972.html#aa247bdb7f6be53fd85d960c18972d972">eosio::chain::controller::validate_tapos</a></div><div class="ttdeci">void validate_tapos(const transaction &amp;t) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01454">controller.cpp:1454</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05_html_a7eb0bfc2d95539ec6a01fec964742d05"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a7eb0bfc2d95539ec6a01fec964742d05.html#a7eb0bfc2d95539ec6a01fec964742d05">eosio::chain::transaction_context::control</a></div><div class="ttdeci">controller &amp; control</div><div class="ttdoc">Fields: </div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00058">transaction_context.hpp:58</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_aa6a12dbf5b9aae9e9587f8423abbb184_html_aa6a12dbf5b9aae9e9587f8423abbb184"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_aa6a12dbf5b9aae9e9587f8423abbb184.html#aa6a12dbf5b9aae9e9587f8423abbb184">eosio::chain::transaction_context::leeway</a></div><div class="ttdeci">fc::microseconds leeway</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00080">transaction_context.hpp:80</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1signed__transaction_html"><div class="ttname"><a href="structeosio_1_1chain_1_1signed__transaction.html">eosio::chain::signed_transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00077">transaction.hpp:77</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_afd0cfc2a2e5adc0964d3591073931d30_html_afd0cfc2a2e5adc0964d3591073931d30"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_afd0cfc2a2e5adc0964d3591073931d30.html#afd0cfc2a2e5adc0964d3591073931d30">eosio::chain::controller::get_mutable_authorization_manager</a></div><div class="ttdeci">authorization_manager &amp; get_mutable_authorization_manager()</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01124">controller.cpp:1124</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a8b98824293d35b44770c21675a5cf0c4_html_a8b98824293d35b44770c21675a5cf0c4"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a8b98824293d35b44770c21675a5cf0c4.html#a8b98824293d35b44770c21675a5cf0c4">eosio::chain::transaction_context::resume_billing_timer</a></div><div class="ttdeci">void resume_billing_timer()</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00316">transaction_context.cpp:316</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166_html_a1286e626b3e9eba432b655d06efd1166"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a1286e626b3e9eba432b655d06efd1166.html#a1286e626b3e9eba432b655d06efd1166">eosio::chain::transaction_context::bill_to_accounts</a></div><div class="ttdeci">flat_set&lt; account_name &gt; bill_to_accounts</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00069">transaction_context.hpp:69</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction__header_acb8d4b05d574db9550dda7ae24f62d3e_html_acb8d4b05d574db9550dda7ae24f62d3e"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction__header_acb8d4b05d574db9550dda7ae24f62d3e.html#acb8d4b05d574db9550dda7ae24f62d3e">eosio::chain::transaction_header::expiration</a></div><div class="ttdeci">time_point_sec expiration</div><div class="ttdoc">the time at which a transaction expires </div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00031">transaction.hpp:31</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_a6ab61cbdffd907f840c71145c7484e53_html_a6ab61cbdffd907f840c71145c7484e53"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction_a6ab61cbdffd907f840c71145c7484e53.html#a6ab61cbdffd907f840c71145c7484e53">eosio::chain::transaction::transaction_extensions</a></div><div class="ttdeci">extensions_type transaction_extensions</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00057">transaction.hpp:57</a></div></div>
<div class="ttc" id="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16_html_a2cb5d7112457a24df46ffcd923270e16"><div class="ttname"><a href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a></div><div class="ttdeci">#define EOS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00012">exceptions.hpp:12</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774_html_a826f8feab4d745ad1ae6ce3daff85774"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">eosio::chain::controller::get_global_properties</a></div><div class="ttdeci">const global_property_object &amp; get_global_properties() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01239">controller.cpp:1239</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a08f8858cab5409e4a4e2fd9afdb79ab2_html_a08f8858cab5409e4a4e2fd9afdb79ab2"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a08f8858cab5409e4a4e2fd9afdb79ab2.html#a08f8858cab5409e4a4e2fd9afdb79ab2">eosio::chain::transaction_context::squash</a></div><div class="ttdeci">void squash()</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00264">transaction_context.cpp:264</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf_html_ad6e015097a10f08028a3e3df3b17ecdf"><div class="ttname"><a href="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf.html#ad6e015097a10f08028a3e3df3b17ecdf">eosio::chain::transaction_exception</a></div><div class="ttdeci">chain type exception Invalid public key Invalid authority Invalid transaction No ABI found Invalid transaction ID Invalid asset unlinkable block transaction outputs in block do not match transaction outputs from applying block shard locks in block are incorrect or mal formed block is too old to push transaction_exception</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00145">exceptions.hpp:145</a></div></div>
<div class="ttc" id="apply__context_8hpp_html"><div class="ttname"><a href="apply__context_8hpp.html">apply_context.hpp</a></div></div>
<div class="ttc" id="authorization__manager_8hpp_html"><div class="ttname"><a href="authorization__manager_8hpp.html">authorization_manager.hpp</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_a72659cea5d663a72934976c95ef151bc_html_a72659cea5d663a72934976c95ef151bc"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction_a72659cea5d663a72934976c95ef151bc.html#a72659cea5d663a72934976c95ef151bc">eosio::chain::transaction::context_free_actions</a></div><div class="ttdeci">vector&lt; action &gt; context_free_actions</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00055">transaction.hpp:55</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ad60b29c3c2ca3b0cc4f15f7687d63ce6_html_ad60b29c3c2ca3b0cc4f15f7687d63ce6"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ad60b29c3c2ca3b0cc4f15f7687d63ce6.html#ad60b29c3c2ca3b0cc4f15f7687d63ce6">eosio::chain::transaction_context::delay</a></div><div class="ttdeci">fc::microseconds delay</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00075">transaction_context.hpp:75</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f_html_a8a31d41148360cae32ebdd09c8afce0f"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a8a31d41148360cae32ebdd09c8afce0f.html#a8a31d41148360cae32ebdd09c8afce0f">eosio::chain::transaction_context::trx</a></div><div class="ttdeci">const signed_transaction &amp; trx</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00059">transaction_context.hpp:59</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ae108738c80290c7e6ef2b68d952c68a6_html_ae108738c80290c7e6ef2b68d952c68a6"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ae108738c80290c7e6ef2b68d952c68a6.html#ae108738c80290c7e6ef2b68d952c68a6">eosio::chain::transaction_context::apply_context_free</a></div><div class="ttdeci">bool apply_context_free</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00077">transaction_context.hpp:77</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a0e777aedcff5772d317ff6b56c7b655b_html_a0e777aedcff5772d317ff6b56c7b655b"><div class="ttname"><a href="classeosio_1_1chain_1_1resource__limits_1_1resource__limits__manager_a0e777aedcff5772d317ff6b56c7b655b.html#a0e777aedcff5772d317ff6b56c7b655b">eosio::chain::resource_limits::resource_limits_manager::verify_account_ram_usage</a></div><div class="ttdeci">void verify_account_ram_usage(const account_name accunt) const</div><div class="ttdef"><b>Definition:</b> <a href="resource__limits_8cpp_source.html#l00177">resource_limits.cpp:177</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a689c5a49677bcfe80a7ca92ac71019af_html_a689c5a49677bcfe80a7ca92ac71019af"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a689c5a49677bcfe80a7ca92ac71019af.html#a689c5a49677bcfe80a7ca92ac71019af">eosio::chain::transaction_context::init_for_input_trx</a></div><div class="ttdeci">void init_for_input_trx(uint64_t packed_trx_unprunable_size, uint64_t packed_trx_prunable_size, uint32_t num_signatures)</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00140">transaction_context.cpp:140</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a02dc2ed4e4c753fcc74376a2254fa400_html_a02dc2ed4e4c753fcc74376a2254fa400"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a02dc2ed4e4c753fcc74376a2254fa400.html#a02dc2ed4e4c753fcc74376a2254fa400">eosio::chain::transaction_context::add_net_usage</a></div><div class="ttdeci">void add_net_usage(uint64_t u)</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00030">transaction_context.hpp:30</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1name_html"><div class="ttname"><a href="structeosio_1_1chain_1_1name.html">eosio::chain::name</a></div><div class="ttdef"><b>Definition:</b> <a href="name_8hpp_source.html#l00042">name.hpp:42</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ab627b00cf01d10335453aa63eecb2eac_html_ab627b00cf01d10335453aa63eecb2eac"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ab627b00cf01d10335453aa63eecb2eac.html#ab627b00cf01d10335453aa63eecb2eac">eosio::chain::transaction_context::validate_ram_usage</a></div><div class="ttdeci">flat_set&lt; account_name &gt; validate_ram_usage</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00070">transaction_context.hpp:70</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_a6637d0dfe66b8927ff2edc19b6825358_html_a6637d0dfe66b8927ff2edc19b6825358"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction_a6637d0dfe66b8927ff2edc19b6825358.html#a6637d0dfe66b8927ff2edc19b6825358">eosio::chain::transaction::first_authorizor</a></div><div class="ttdeci">account_name first_authorizor() const</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00067">transaction.hpp:67</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_a7edddb2290e6e875e48ccb50139a6627_html_a7edddb2290e6e875e48ccb50139a6627"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction_a7edddb2290e6e875e48ccb50139a6627.html#a7edddb2290e6e875e48ccb50139a6627">eosio::chain::transaction::total_actions</a></div><div class="ttdeci">uint32_t total_actions() const</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00066">transaction.hpp:66</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction__header_a5aff4778a70f56f39242102064b34092_html_a5aff4778a70f56f39242102064b34092"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction__header_a5aff4778a70f56f39242102064b34092.html#a5aff4778a70f56f39242102064b34092">eosio::chain::transaction_header::max_cpu_usage_ms</a></div><div class="ttdeci">uint8_t max_cpu_usage_ms</div><div class="ttdoc">upper limit on total network bandwidth (in 8 byte words) billed for this transaction ...</div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00035">transaction.hpp:35</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a102f397f578b19da8e4e3b8dc28e68b6_html_a102f397f578b19da8e4e3b8dc28e68b6"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a102f397f578b19da8e4e3b8dc28e68b6.html#a102f397f578b19da8e4e3b8dc28e68b6">eosio::chain::transaction_context::init_for_deferred_trx</a></div><div class="ttdeci">void init_for_deferred_trx(fc::time_point published)</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00175">transaction_context.cpp:175</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a9c23f0fbb2d058fe307f9c9844ad0d22_html_a9c23f0fbb2d058fe307f9c9844ad0d22"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a9c23f0fbb2d058fe307f9c9844ad0d22.html#a9c23f0fbb2d058fe307f9c9844ad0d22">eosio::chain::transaction_context::init_for_implicit_trx</a></div><div class="ttdeci">void init_for_implicit_trx(uint64_t initial_net_usage=0)</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00134">transaction_context.cpp:134</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_html"><div class="ttname"><a href="classeosio_1_1chain_1_1controller.html">eosio::chain::controller</a></div><div class="ttdef"><b>Definition:</b> <a href="controller_8hpp_source.html#l00036">controller.hpp:36</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae_html_a1000b2d4028aa08ddfd0b12b4c8fd4ae"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae.html#a1000b2d4028aa08ddfd0b12b4c8fd4ae">eosio::chain::transaction_context::executed</a></div><div class="ttdeci">vector&lt; action_receipt &gt; executed</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00068">transaction_context.hpp:68</a></div></div>
<div class="ttc" id="generated__transaction__object_8hpp_html"><div class="ttname"><a href="generated__transaction__object_8hpp.html">generated_transaction_object.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a68e99023f783c078c4344869b412a8a5_html_a68e99023f783c078c4344869b412a8a5"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a68e99023f783c078c4344869b412a8a5.html#a68e99023f783c078c4344869b412a8a5">eosio::chain::transaction_context::pause_billing_timer</a></div><div class="ttdeci">void pause_billing_timer()</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00307">transaction_context.cpp:307</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440_html_a5fa53b350eec65b6a826d039d0286440"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">eosio::chain::controller::db</a></div><div class="ttdeci">chainbase::database &amp; db() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01151">controller.cpp:1151</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a73b4a1fcaf1d79d02c758453980fcf41_html_a73b4a1fcaf1d79d02c758453980fcf41"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a73b4a1fcaf1d79d02c758453980fcf41.html#a73b4a1fcaf1d79d02c758453980fcf41">eosio::chain::transaction_context::finalize</a></div><div class="ttdeci">void finalize()</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00203">transaction_context.cpp:203</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_af046b9bd6a679a4a28cab4a3f46f2d8c_html_af046b9bd6a679a4a28cab4a3f46f2d8c"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_af046b9bd6a679a4a28cab4a3f46f2d8c.html#af046b9bd6a679a4a28cab4a3f46f2d8c">eosio::chain::controller::validate_referenced_accounts</a></div><div class="ttdeci">void validate_referenced_accounts(const transaction &amp;t) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01412">controller.cpp:1412</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c_html_a2106ec5ced5c780d6cbebf6a727f910c"><div class="ttname"><a href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">eosio::chain::account_name</a></div><div class="ttdeci">name account_name</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00101">types.hpp:101</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d_html_a24aaeed95e00fe9ee56b4ee9142dd08d"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a24aaeed95e00fe9ee56b4ee9142dd08d.html#a24aaeed95e00fe9ee56b4ee9142dd08d">eosio::chain::transaction_context::trace</a></div><div class="ttdeci">transaction_trace_ptr trace</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00062">transaction_context.hpp:62</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1authorization__manager_a2cbd47dc471035cccd8e415617491153_html_a2cbd47dc471035cccd8e415617491153"><div class="ttname"><a href="classeosio_1_1chain_1_1authorization__manager_a2cbd47dc471035cccd8e415617491153.html#a2cbd47dc471035cccd8e415617491153">eosio::chain::authorization_manager::update_permission_usage</a></div><div class="ttdeci">void update_permission_usage(const permission_object &amp;permission)</div><div class="ttdef"><b>Definition:</b> <a href="authorization__manager_8cpp_source.html#l00102">authorization_manager.cpp:102</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ad6eccde879e7934d348b7cf6ee2b44a7_html_ad6eccde879e7934d348b7cf6ee2b44a7"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ad6eccde879e7934d348b7cf6ee2b44a7.html#ad6eccde879e7934d348b7cf6ee2b44a7">eosio::chain::transaction_context::is_input</a></div><div class="ttdeci">bool is_input</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00076">transaction_context.hpp:76</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a6e36ac6e35f4a0a2add2875039cc0d91_html_a6e36ac6e35f4a0a2add2875039cc0d91"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a6e36ac6e35f4a0a2add2875039cc0d91.html#a6e36ac6e35f4a0a2add2875039cc0d91">eosio::chain::transaction_context::add_ram_usage</a></div><div class="ttdeci">void add_ram_usage(account_name account, int64_t ram_delta)</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00354">transaction_context.cpp:354</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4_html_a3c27d7150772fd3cdc8d8d2efb00d5a4"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a3c27d7150772fd3cdc8d8d2efb00d5a4.html#a3c27d7150772fd3cdc8d8d2efb00d5a4">eosio::chain::transaction_context::billed_cpu_time_us</a></div><div class="ttdeci">int64_t billed_cpu_time_us</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00081">transaction_context.hpp:81</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 29 2018 17:40:54 for Eos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
