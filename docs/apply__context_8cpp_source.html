<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Eos: libraries/chain/apply_context.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Eos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_94df585d4e205d65756e56c0817a7014.html">chain</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">apply_context.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="apply__context_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="apply__context_8hpp.html">eosio/chain/apply_context.hpp</a>&gt;</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="controller_8hpp.html">eosio/chain/controller.hpp</a>&gt;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="transaction__context_8hpp.html">eosio/chain/transaction_context.hpp</a>&gt;</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="exceptions_8hpp.html">eosio/chain/exceptions.hpp</a>&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="wasm__interface_8hpp.html">eosio/chain/wasm_interface.hpp</a>&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="generated__transaction__object_8hpp.html">eosio/chain/generated_transaction_object.hpp</a>&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="authorization__manager_8hpp.html">eosio/chain/authorization_manager.hpp</a>&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="resource__limits_8hpp.html">eosio/chain/resource_limits.hpp</a>&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="account__object_8hpp.html">eosio/chain/account_object.hpp</a>&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="global__property__object_8hpp.html">eosio/chain/global_property_object.hpp</a>&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;boost/container/flat_set.hpp&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">using</span> boost::container::flat_set;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceeosio.html">eosio</a> { <span class="keyword">namespace </span>chain {</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> print_debug(<a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a> receiver, <span class="keyword">const</span> action_trace&amp; ar) {</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;   <span class="keywordflow">if</span> (!ar.console.empty()) {</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;      <span class="keyword">auto</span> prefix = fc::format_string(</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                      <span class="stringliteral">&quot;\n[(${a},${n})-&gt;${r}]&quot;</span>,</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;                                      fc::mutable_variant_object()</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;                                      (<span class="stringliteral">&quot;a&quot;</span>, ar.act.account)</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;                                      (<span class="stringliteral">&quot;n&quot;</span>, ar.act.name)</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                                      (<span class="stringliteral">&quot;r&quot;</span>, receiver));</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      dlog(prefix + <span class="stringliteral">&quot;: CONSOLE OUTPUT BEGIN =====================\n&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;           + ar.console</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;           + prefix + <span class="stringliteral">&quot;: CONSOLE OUTPUT END   =====================&quot;</span> );</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;   }</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;}</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99.html#ab7c72df6e46d3160e28fb22a41a81e99">   32</a></span>&#160;<a class="code" href="structeosio_1_1chain_1_1action__trace.html">action_trace</a> <a class="code" href="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99.html#ab7c72df6e46d3160e28fb22a41a81e99">apply_context::exec_one</a>()</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;   <span class="keyword">auto</span> start = fc::time_point::now();</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; cfg = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;   <span class="keywordflow">try</span> {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;a = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_ad290d6b9a4d003ee22086695a92a1667.html#ad290d6b9a4d003ee22086695a92a1667">get_account</a>(<a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_a44d0277b781b2461d9d42f69dec87d5e.html#a44d0277b781b2461d9d42f69dec87d5e">privileged</a> = a.privileged;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;      <span class="keyword">auto</span> native = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a00f6845fc8587da5f9b4b1aa5e0d4115.html#a00f6845fc8587da5f9b4b1aa5e0d4115">find_apply_handler</a>(<a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>, <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_adb73e3a236a3c11c104c6dd6ebad9429.html#adb73e3a236a3c11c104c6dd6ebad9429">account</a>, <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a902d64826c6d06f1ccb4be01bb7353a2.html#a902d64826c6d06f1ccb4be01bb7353a2">name</a>);</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="keywordflow">if</span>( native ) {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_aa21275c4089a29d9b84c30a95fab0efe.html#aa21275c4089a29d9b84c30a95fab0efe">is_producing_block</a>() ) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_af6aa9a5bcc592ae08c47d4f27a1a026c.html#af6aa9a5bcc592ae08c47d4f27a1a026c">check_contract_list</a>( <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> );</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;         }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;         (*native)(*this);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      <span class="keywordflow">if</span>( a.code.size() &gt; 0</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;          &amp;&amp; !(<a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_adb73e3a236a3c11c104c6dd6ebad9429.html#adb73e3a236a3c11c104c6dd6ebad9429">account</a> == config::system_account_name &amp;&amp; <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a902d64826c6d06f1ccb4be01bb7353a2.html#a902d64826c6d06f1ccb4be01bb7353a2">name</a> == <a class="code" href="name_8hpp_af9c1edb0e0da55ec6ba09f32f6839529.html#af9c1edb0e0da55ec6ba09f32f6839529">N</a>(<a class="code" href="structeosio_1_1chain_1_1setcode.html">setcode</a>) &amp;&amp; <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> == config::system_account_name) )</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;         <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_aa21275c4089a29d9b84c30a95fab0efe.html#aa21275c4089a29d9b84c30a95fab0efe">is_producing_block</a>() ) {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_af6aa9a5bcc592ae08c47d4f27a1a026c.html#af6aa9a5bcc592ae08c47d4f27a1a026c">check_contract_list</a>( <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> );</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;         }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;         <span class="keywordflow">try</span> {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5783134f223585dfc187a56716b5da22.html#a5783134f223585dfc187a56716b5da22">get_wasm_interface</a>().<a class="code" href="classeosio_1_1chain_1_1wasm__interface_a9986d0881fd8557db66d709f79edca63.html#a9986d0881fd8557db66d709f79edca63">apply</a>(a.code_version, a.code, *<span class="keyword">this</span>);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;         } <span class="keywordflow">catch</span> ( <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1wasm__exit.html">wasm_exit</a>&amp; ){}</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      }</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   } FC_CAPTURE_AND_RETHROW((_pending_console_output.str()));</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="structeosio_1_1chain_1_1action__receipt.html">action_receipt</a> r;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_a35a92253c2fedad87be7239ce76d4f34.html#a35a92253c2fedad87be7239ce76d4f34">receiver</a>         = <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_a08437dea175f505898daab0365ce94a7.html#a08437dea175f505898daab0365ce94a7">act_digest</a>       = digest_type::hash(<a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_a3b722c3391611b3f9afecad3ddc332a0.html#a3b722c3391611b3f9afecad3ddc332a0">global_sequence</a>  = <a class="code" href="classeosio_1_1chain_1_1apply__context_aaef35f7b11dd26e0a2a20cdf3d5dc777.html#aaef35f7b11dd26e0a2a20cdf3d5dc777">next_global_sequence</a>();</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_a768f16e802e7d0f3c7a68b371d4b430c.html#a768f16e802e7d0f3c7a68b371d4b430c">recv_sequence</a>    = <a class="code" href="classeosio_1_1chain_1_1apply__context_a32d178315f034cdf062db5ea76501a70.html#a32d178315f034cdf062db5ea76501a70">next_recv_sequence</a>( <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> );</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; account_sequence = <a class="code" href="classeosio_1_1chain_1_1apply__context_a2a6ac63b9768874ce104b8c14759334b.html#a2a6ac63b9768874ce104b8c14759334b">db</a>.get&lt;<a class="code" href="classeosio_1_1chain_1_1account__sequence__object.html">account_sequence_object</a>, by_name&gt;(<a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_adb73e3a236a3c11c104c6dd6ebad9429.html#adb73e3a236a3c11c104c6dd6ebad9429">account</a>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_acd76fc97cc631f9a78a5aeb1db2ea10a.html#acd76fc97cc631f9a78a5aeb1db2ea10a">code_sequence</a>    = account_sequence.code_sequence;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_a7155ee49e532ecbc7998d518309d1522.html#a7155ee49e532ecbc7998d518309d1522">abi_sequence</a>     = account_sequence.abi_sequence;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a> ) {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      r.<a class="code" href="structeosio_1_1chain_1_1action__receipt_aba016ab56f573736f621cb09b905ce9a.html#aba016ab56f573736f621cb09b905ce9a">auth_sequence</a>[auth.actor] = <a class="code" href="classeosio_1_1chain_1_1apply__context_a21373c534ecde86e2a93b8df0510c83d.html#a21373c534ecde86e2a93b8df0510c83d">next_auth_sequence</a>( auth.actor );</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   }</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <a class="code" href="structeosio_1_1chain_1_1action__trace.html">action_trace</a> t(r);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   t.<a class="code" href="structeosio_1_1chain_1_1base__action__trace_a6ae01ece9e3fcd499f299be2a90f0e7f.html#a6ae01ece9e3fcd499f299be2a90f0e7f">trx_id</a> = <a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>.<a class="code" href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">id</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   t.<a class="code" href="structeosio_1_1chain_1_1base__action__trace_a65005cbd05f2969a86beb1e2e6bfb974.html#a65005cbd05f2969a86beb1e2e6bfb974">act</a> = <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   t.<a class="code" href="structeosio_1_1chain_1_1base__action__trace_aa9f6c0fd14317a574f837d43675a1cf3.html#aa9f6c0fd14317a574f837d43675a1cf3">console</a> = _pending_console_output.str();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>.<a class="code" href="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae.html#a1000b2d4028aa08ddfd0b12b4c8fd4ae">executed</a>.emplace_back( move(r) );</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_ac44cfb3fa2ece7d456d9159f4afd9fe0.html#ac44cfb3fa2ece7d456d9159f4afd9fe0">contracts_console</a>() ) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      print_debug(<a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>, t);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <a class="code" href="classeosio_1_1chain_1_1apply__context_a309aa422b43ee91cfd52cd68ad4edc50.html#a309aa422b43ee91cfd52cd68ad4edc50">reset_console</a>();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   t.<a class="code" href="structeosio_1_1chain_1_1base__action__trace_a0b4258ae021e74a096facc7f31d2a65d.html#a0b4258ae021e74a096facc7f31d2a65d">elapsed</a> = fc::time_point::now() - start;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">return</span> t;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a36cb81932332b79fb3e045087f1a65bc.html#a36cb81932332b79fb3e045087f1a65bc">   93</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a36cb81932332b79fb3e045087f1a65bc.html#a36cb81932332b79fb3e045087f1a65bc">apply_context::exec</a>()</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   _notified.push_back(<a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a> = <a class="code" href="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99.html#ab7c72df6e46d3160e28fb22a41a81e99">exec_one</a>();</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <span class="keywordflow">for</span>( uint32_t i = 1; i &lt; _notified.size(); ++i ) {</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> = _notified[i];</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a>.<a class="code" href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">inline_traces</a>.emplace_back( <a class="code" href="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99.html#ab7c72df6e46d3160e28fb22a41a81e99">exec_one</a>() );</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordflow">if</span>( _cfa_inline_actions.size() &gt; 0 || _inline_actions.size() &gt; 0 ) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2a4be0842299e77224a156861ba27ca.html#ad2a4be0842299e77224a156861ba27ca">recurse_depth</a> &lt; <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">get_global_properties</a>().configuration.<a class="code" href="structeosio_1_1chain_1_1chain__config_a4a6a0876bf859489cec39d8630354349.html#a4a6a0876bf859489cec39d8630354349">max_inline_action_depth</a>,</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                  <a class="code" href="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf.html#ad6e015097a10f08028a3e3df3b17ecdf">transaction_exception</a>, <span class="stringliteral">&quot;inline action recursion depth reached&quot;</span> );</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; inline_action : _cfa_inline_actions ) {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a>.<a class="code" href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">inline_traces</a>.emplace_back();</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>.dispatch_action( <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a>.<a class="code" href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">inline_traces</a>.back(), inline_action, inline_action.account, <span class="keyword">true</span>, <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2a4be0842299e77224a156861ba27ca.html#ad2a4be0842299e77224a156861ba27ca">recurse_depth</a> + 1 );</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; inline_action : _inline_actions ) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a>.<a class="code" href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">inline_traces</a>.emplace_back();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>.dispatch_action( <a class="code" href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">trace</a>.<a class="code" href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">inline_traces</a>.back(), inline_action, inline_action.account, <span class="keyword">false</span>, <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2a4be0842299e77224a156861ba27ca.html#ad2a4be0842299e77224a156861ba27ca">recurse_depth</a> + 1 );</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;} </div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ad17c03b45743f34d2c2af0982b6ed8df.html#ad17c03b45743f34d2c2af0982b6ed8df">  119</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_ad17c03b45743f34d2c2af0982b6ed8df.html#ad17c03b45743f34d2c2af0982b6ed8df">apply_context::is_account</a>( <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; account )<span class="keyword">const </span>{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">nullptr</span> != <a class="code" href="classeosio_1_1chain_1_1apply__context_a2a6ac63b9768874ce104b8c14759334b.html#a2a6ac63b9768874ce104b8c14759334b">db</a>.find&lt;<a class="code" href="classeosio_1_1chain_1_1account__object.html">account_object</a>,by_name&gt;( account );</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a1e7717a03a5d45f1b1dd608077a7dc29.html#a1e7717a03a5d45f1b1dd608077a7dc29">  123</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a1e7717a03a5d45f1b1dd608077a7dc29.html#a1e7717a03a5d45f1b1dd608077a7dc29">apply_context::require_authorization</a>( <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; account ) {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="keywordflow">for</span>( uint32_t i=0; i &lt; <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a>.size(); i++ ) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;     <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a>[i].actor == account ) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="classeosio_1_1chain_1_1apply__context_ad9084470e2054e614c58d55d431f11cd.html#ad9084470e2054e614c58d55d431f11cd">used_authorizations</a>[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;     }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <span class="keyword">false</span>, missing_auth_exception, <span class="stringliteral">&quot;missing authority of ${account}&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>,account));</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_afe66a771cfeeabcf923e45cba22bd472.html#afe66a771cfeeabcf923e45cba22bd472">  133</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_afe66a771cfeeabcf923e45cba22bd472.html#afe66a771cfeeabcf923e45cba22bd472">apply_context::has_authorization</a>( <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; account )<span class="keyword">const </span>{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a> )</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;     <span class="keywordflow">if</span>( auth.actor == account )</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ae2501b35d5851aa404fd396d3684d264.html#ae2501b35d5851aa404fd396d3684d264">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a1e7717a03a5d45f1b1dd608077a7dc29.html#a1e7717a03a5d45f1b1dd608077a7dc29">apply_context::require_authorization</a>(<span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; account,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">permission_name</a>&amp; permission) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">for</span>( uint32_t i=0; i &lt; <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a>.size(); i++ )</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;     <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a>[i].actor == account ) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">act</a>.<a class="code" href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">authorization</a>[i].permission == permission ) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;           <a class="code" href="classeosio_1_1chain_1_1apply__context_ad9084470e2054e614c58d55d431f11cd.html#ad9084470e2054e614c58d55d431f11cd">used_authorizations</a>[i] = <span class="keyword">true</span>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;           <span class="keywordflow">return</span>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;     }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <span class="keyword">false</span>, missing_auth_exception, <span class="stringliteral">&quot;missing authority of ${account}/${permission}&quot;</span>,</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;              (<span class="stringliteral">&quot;account&quot;</span>,account)(<span class="stringliteral">&quot;permission&quot;</span>,permission) );</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_af82870b5127b8c5789d7d1cddffc1765.html#af82870b5127b8c5789d7d1cddffc1765">  153</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_af82870b5127b8c5789d7d1cddffc1765.html#af82870b5127b8c5789d7d1cddffc1765">apply_context::has_recipient</a>( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> )<span class="keyword">const </span>{</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">auto</span> a : _notified )</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">if</span>( a == <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> )</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a22b686c4acfc848d68bb63172932a396.html#a22b686c4acfc848d68bb63172932a396">  160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a22b686c4acfc848d68bb63172932a396.html#a22b686c4acfc848d68bb63172932a396">apply_context::require_recipient</a>( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> recipient ) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="classeosio_1_1chain_1_1apply__context_af82870b5127b8c5789d7d1cddffc1765.html#af82870b5127b8c5789d7d1cddffc1765">has_recipient</a>(recipient) ) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      _notified.push_back(recipient);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a0d8b506bb45fb4500ea5f48ca84c628b.html#a0d8b506bb45fb4500ea5f48ca84c628b">  182</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a0d8b506bb45fb4500ea5f48ca84c628b.html#a0d8b506bb45fb4500ea5f48ca84c628b">apply_context::execute_inline</a>( <a class="code" href="structeosio_1_1chain_1_1action.html">action</a>&amp;&amp; a ) {</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keyword">auto</span>* <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">db</a>().find&lt;<a class="code" href="classeosio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(a.account);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> != <span class="keyword">nullptr</span>, <a class="code" href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">action_validate_exception</a>,</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;               <span class="stringliteral">&quot;inline action&#39;s code account ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, a.account) );</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; auth : a.authorization ) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keyword">auto</span>* actor = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">db</a>().find&lt;<a class="code" href="classeosio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(auth.actor);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( actor != <span class="keyword">nullptr</span>, <a class="code" href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">action_validate_exception</a>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                  <span class="stringliteral">&quot;inline action&#39;s authorizing actor ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, auth.actor) );</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a639302daa7f85438f8df5a8fbe952160.html#a639302daa7f85438f8df5a8fbe952160">get_authorization_manager</a>().<a class="code" href="classeosio_1_1chain_1_1authorization__manager_a27421e55aa9490ec47637535be08eed5.html#a27421e55aa9490ec47637535be08eed5">find_permission</a>(auth) != <span class="keyword">nullptr</span>, <a class="code" href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">action_validate_exception</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                  <span class="stringliteral">&quot;inline action&#39;s authorizations include a non-existent permission: {permission}&quot;</span>,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                  (<span class="stringliteral">&quot;permission&quot;</span>, auth) );</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="comment">// No need to check authorization if: replaying irreversible blocks; contract is privileged; or, contract is calling itself.</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">if</span>( !<a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a81444eacf323dd782c2215967931af3d.html#a81444eacf323dd782c2215967931af3d">skip_auth_check</a>() &amp;&amp; !<a class="code" href="classeosio_1_1chain_1_1apply__context_a44d0277b781b2461d9d42f69dec87d5e.html#a44d0277b781b2461d9d42f69dec87d5e">privileged</a> &amp;&amp; a.account != <a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a> ) {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a639302daa7f85438f8df5a8fbe952160.html#a639302daa7f85438f8df5a8fbe952160">get_authorization_manager</a>()</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;             .<a class="code" href="classeosio_1_1chain_1_1authorization__manager_ae925415529209b8f0ef9987479a866b5.html#ae925415529209b8f0ef9987479a866b5">check_authorization</a>( {a},</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                   {},</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                   {{<a class="code" href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">receiver</a>, config::eosio_code_name}},</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                   <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>() - <a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>.<a class="code" href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">published</a>,</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                   std::bind(&amp;<a class="code" href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">transaction_context::checktime</a>, &amp;this-&gt;<a class="code" href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">trx_context</a>),</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                   false</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                 );</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">//QUESTION: Is it smart to allow a deferred transaction that has been delayed for some time to get away</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="comment">//          with sending an inline action that requires a delay even though the decision to send that inline</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="comment">//          action was made at the moment the deferred transaction was executed with potentially no forewarning?</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   _inline_actions.emplace_back( move(a) );</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a191a975c11c36e90758dae4d5f83cd73.html#a191a975c11c36e90758dae4d5f83cd73">  215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_a191a975c11c36e90758dae4d5f83cd73.html#a191a975c11c36e90758dae4d5f83cd73">apply_context::execute_context_free_inline</a>( <a class="code" href="structeosio_1_1chain_1_1action.html">action</a>&amp;&amp; a ) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keyword">auto</span>* <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">db</a>().find&lt;<a class="code" href="classeosio_1_1chain_1_1account__object.html">account_object</a>, by_name&gt;(a.account);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a> != <span class="keyword">nullptr</span>, <a class="code" href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">action_validate_exception</a>,</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;               <span class="stringliteral">&quot;inline action&#39;s code account ${account} does not exist&quot;</span>, (<span class="stringliteral">&quot;account&quot;</span>, a.account) );</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( a.authorization.size() == 0, <a class="code" href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">action_validate_exception</a>,</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;               <span class="stringliteral">&quot;context-free actions cannot have authorizations&quot;</span> );</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   _cfa_inline_actions.emplace_back( move(a) );</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ab54b7c01d69ba3463ec271d68e535d4a.html#ab54b7c01d69ba3463ec271d68e535d4a">  227</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classeosio_1_1chain_1_1apply__context_ab54b7c01d69ba3463ec271d68e535d4a.html#ab54b7c01d69ba3463ec271d68e535d4a">apply_context::schedule_deferred_transaction</a>( <span class="keyword">const</span> <a class="code" href="namespaceeosio_1_1chain_a7082035ec94c5379896cea7c61f6b721.html#a7082035ec94c5379896cea7c61f6b721">uint128_t</a>&amp; sender_id, <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> payer, <a class="code" href="structeosio_1_1chain_1_1transaction.html">transaction</a>&amp;&amp; trx, <span class="keywordtype">bool</span> replace_existing ) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   FC_ASSERT( trx.context_free_actions.size() == 0, <span class="stringliteral">&quot;context free actions are not currently allowed in generated transactions&quot;</span> );</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   trx.expiration = <a class="code" href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">control</a>.<a class="code" href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">pending_block_time</a>() + fc::microseconds(999<span class="stringliteral">&#39;999); // Rounds up to nearest second (makes expiration check unnecessary)</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral">   trx.set_reference_block(control.head_block_id()); // No TaPoS check necessary</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">   control.validate_referenced_accounts( trx );</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral">   // Charge ahead of time for the additional net usage needed to retire the deferred transaction</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">   // whether that be by successfully executing, soft failure, hard failure, or expiration.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral">   const auto&amp; cfg = control.get_global_properties().configuration;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">   trx_context.add_net_usage( static_cast&lt;uint64_t&gt;(cfg.base_per_transaction_net_usage)</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">                               + static_cast&lt;uint64_t&gt;(config::transaction_id_net_usage) ); // Will exit early if net usage cannot be payed.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">   auto delay = fc::seconds(trx.delay_sec);</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">   if( !control.skip_auth_check() &amp;&amp; !privileged ) { // Do not need to check authorization if replayng irreversible block or if contract is privileged</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">      if( payer != receiver ) {</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">         require_authorization(payer); /// uses payer&#39;</span>s storage</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="comment">// if a contract is deferring only actions to itself then there is no need</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="comment">// to check permissions, it could have done everything anyway.</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordtype">bool</span> check_auth = <span class="keyword">false</span>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span>&amp; act : trx.actions ) {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         if( act.account != receiver ) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            check_auth = true;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            break;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keywordflow">if</span>( check_auth ) {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;         control.get_authorization_manager()</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                .check_authorization( trx.actions,</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                                      {},</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                      {{receiver, config::eosio_code_name}},</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                      delay,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                                      std::bind(&amp;transaction_context::checktime, &amp;this-&gt;trx_context),</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                      false</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                    );</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   uint32_t trx_size = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keyword">auto</span>&amp; d = control.db();</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">if</span> ( <span class="keyword">auto</span> ptr = d.find&lt;generated_transaction_object,by_sender_id&gt;(boost::make_tuple(receiver, sender_id)) ) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a>( replace_existing, deferred_tx_duplicate, <span class="stringliteral">&quot;deferred transaction with the same sender_id and payer already exists&quot;</span> );</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      d.modify&lt;generated_transaction_object&gt;( *ptr, [&amp;]( <span class="keyword">auto</span>&amp; gtx ) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            gtx.sender      = receiver;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            gtx.sender_id   = sender_id;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            gtx.payer       = payer;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            gtx.published   = control.pending_block_time();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            gtx.delay_until = gtx.published + delay;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            gtx.expiration  = gtx.delay_until + fc::seconds(control.get_global_properties().configuration.deferred_trx_expiration_window);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            trx_size = gtx.set( trx );</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         });</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      d.create&lt;generated_transaction_object&gt;( [&amp;]( <span class="keyword">auto</span>&amp; gtx ) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            gtx.trx_id      = trx.id();</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            gtx.sender      = receiver;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            gtx.sender_id   = sender_id;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            gtx.payer       = payer;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            gtx.published   = control.pending_block_time();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            gtx.delay_until = gtx.published + delay;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            gtx.expiration  = gtx.delay_until + fc::seconds(control.get_global_properties().configuration.deferred_trx_expiration_window);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            trx_size = gtx.set( trx );</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         });</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   trx_context.add_ram_usage( payer, (config::billable_size_v&lt;generated_transaction_object&gt; + trx_size) );</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_aead163d8bfb240f4545830decbef6368.html#aead163d8bfb240f4545830decbef6368">  298</a></span>&#160;<span class="keywordtype">bool</span> apply_context::cancel_deferred_transaction( <span class="keyword">const</span> <a class="code" href="namespaceeosio_1_1chain_a7082035ec94c5379896cea7c61f6b721.html#a7082035ec94c5379896cea7c61f6b721">uint128_t</a>&amp; sender_id, <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> sender ) {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keyword">auto</span>&amp; generated_transaction_idx = db.get_mutable_index&lt;<a class="code" href="namespaceeosio_1_1chain_a113a4fa08534159756415238097d0b2b.html#a113a4fa08534159756415238097d0b2b">generated_transaction_multi_index</a>&gt;();</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* gto = db.find&lt;<a class="code" href="classeosio_1_1chain_1_1generated__transaction__object.html">generated_transaction_object</a>,by_sender_id&gt;(boost::make_tuple(sender, sender_id));</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keywordflow">if</span> ( gto ) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      trx_context.add_ram_usage( gto-&gt;payer, -(config::billable_size_v&lt;generated_transaction_object&gt; + gto-&gt;packed_trx.size()) );</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      generated_transaction_idx.remove(*gto);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordflow">return</span> gto;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="keyword">const</span> <a class="code" href="classeosio_1_1chain_1_1table__id__object.html">table_id_object</a>* apply_context::find_table( <a class="code" href="structeosio_1_1chain_1_1name.html">name</a> <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, <a class="code" href="structeosio_1_1chain_1_1name.html">name</a> scope, <a class="code" href="structeosio_1_1chain_1_1name.html">name</a> table ) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">return</span> db.find&lt;<a class="code" href="classeosio_1_1chain_1_1table__id__object.html">table_id_object</a>, by_code_scope_table&gt;(boost::make_tuple(<a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table));</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">const</span> table_id_object&amp; apply_context::find_or_create_table( name <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, name scope, name table, <span class="keyword">const</span> <a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a> &amp;payer ) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* existing_tid =  db.find&lt;table_id_object, by_code_scope_table&gt;(boost::make_tuple(<a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table));</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">if</span> (existing_tid != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">return</span> *existing_tid;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   update_db_usage(payer, config::billable_size_v&lt;table_id_object&gt;);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">return</span> db.create&lt;table_id_object&gt;([&amp;](table_id_object &amp;t_id){</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      t_id.code = <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      t_id.scope = scope;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      t_id.table = table;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      t_id.payer = payer;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   });</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keywordtype">void</span> apply_context::remove_table( <span class="keyword">const</span> table_id_object&amp; tid ) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   update_db_usage(tid.payer, - config::billable_size_v&lt;table_id_object&gt;);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   db.remove(tid);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a2b64c63eb52e3054ed6515414dff23f4.html#a2b64c63eb52e3054ed6515414dff23f4">  333</a></span>&#160;vector&lt;account_name&gt; apply_context::get_active_producers()<span class="keyword"> const </span>{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; ap = control.active_producers();</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   vector&lt;account_name&gt; accounts; accounts.reserve( ap.producers.size() );</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; producer : ap.producers )</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      accounts.push_back(producer.producer_name);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">return</span> accounts;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a309aa422b43ee91cfd52cd68ad4edc50.html#a309aa422b43ee91cfd52cd68ad4edc50">  343</a></span>&#160;<span class="keywordtype">void</span> apply_context::reset_console() {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   _pending_console_output = std::ostringstream();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   _pending_console_output.setf( std::ios::scientific, std::ios::floatfield );</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a6895c6a6f2b44848329623106b442b59.html#a6895c6a6f2b44848329623106b442b59">  348</a></span>&#160;<a class="code" href="namespaceeosio_1_1chain_aca43527cf72e44ecea20b4fbc4c0befb.html#aca43527cf72e44ecea20b4fbc4c0befb">bytes</a> apply_context::get_packed_transaction() {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keyword">auto</span> r = <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a46b5a83fe49f18aeefa8d583086395e1.html#a46b5a83fe49f18aeefa8d583086395e1">fc::raw::pack</a>( static_cast&lt;const transaction&amp;&gt;(trx_context.trx) );</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">return</span> r;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a7e1e8eda58ad8e63724e78b9f1d62b0c.html#a7e1e8eda58ad8e63724e78b9f1d62b0c">  353</a></span>&#160;<span class="keywordtype">void</span> apply_context::update_db_usage( <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; payer, int64_t delta ) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">if</span>( delta &gt; 0 ) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span>( !(privileged || payer == <a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a>(receiver)) ) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         require_authorization( payer );</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   trx_context.add_ram_usage(payer, delta);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_aec6bf6544de208bb7f5beb248aa835e7.html#aec6bf6544de208bb7f5beb248aa835e7">  363</a></span>&#160;<span class="keywordtype">int</span> apply_context::get_action( uint32_t type, uint32_t index, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size )<span class="keyword">const</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trx = trx_context.trx;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1action.html">action</a>* act_ptr = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <span class="keywordflow">if</span>( type == 0 ) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">if</span>( index &gt;= trx.context_free_actions.size() )</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      act_ptr = &amp;trx.context_free_actions[index];</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>( type == 1 ) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">if</span>( index &gt;= trx.actions.size() )</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      act_ptr = &amp;trx.actions[index];</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keyword">auto</span> ps = fc::raw::pack_size( *act_ptr );</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">if</span>( ps &lt;= buffer_size ) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      fc::datastream&lt;char*&gt; ds(buffer, buffer_size);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a46b5a83fe49f18aeefa8d583086395e1.html#a46b5a83fe49f18aeefa8d583086395e1">fc::raw::pack</a>( ds, *act_ptr );</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">return</span> ps;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ae5d5b63f63315e64fd840a24c06e9332.html#ae5d5b63f63315e64fd840a24c06e9332">  387</a></span>&#160;<span class="keywordtype">int</span> apply_context::get_context_free_data( uint32_t index, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size )<span class="keyword">const</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; trx = trx_context.trx;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">if</span>( index &gt;= trx.context_free_data.size() ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keyword">auto</span> s = trx.context_free_data[index].size();</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">if</span>( buffer_size == 0 ) <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keyword">auto</span> copy_size = std::min( buffer_size, s );</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5.html#a52e0d440fe9232cd5ccd7649dd145ec5">memcpy</a>( buffer, trx.context_free_data[index].data(), copy_size );</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordflow">return</span> copy_size;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_aeb93e42cbf2102099276f55db3b4e974.html#aeb93e42cbf2102099276f55db3b4e974">  402</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_store_i64( uint64_t scope, uint64_t table, <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; payer, uint64_t <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordflow">return</span> db_store_i64( receiver, scope, table, payer, <span class="keywordtype">id</span>, buffer, buffer_size);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;}</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keywordtype">int</span> apply_context::db_store_i64( uint64_t <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, uint64_t scope, uint64_t table, <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>&amp; payer, uint64_t <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">//   require_write_lock( scope );</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tab = find_or_create_table( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table, payer );</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keyword">auto</span> tableid = tab.id;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   FC_ASSERT( payer != <a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a>(), <span class="stringliteral">&quot;must specify a valid account to pay for new record&quot;</span> );</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = db.create&lt;<a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>&gt;( [&amp;]( <span class="keyword">auto</span>&amp; o ) {</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      o.t_id        = tableid;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      o.primary_key = id;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      o.value.resize( buffer_size );</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      o.payer       = payer;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5.html#a52e0d440fe9232cd5ccd7649dd145ec5">memcpy</a>( o.value.data(), buffer, buffer_size );</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   });</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   db.modify( tab, [&amp;]( <span class="keyword">auto</span>&amp; t ) {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;     ++t.count;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   });</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   int64_t billable_size = (int64_t)(buffer_size + config::billable_size_v&lt;key_value_object&gt;);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   update_db_usage( payer, billable_size);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   keyval_cache.cache_table( tab );</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add( obj );</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ab521b57b09693d8f9bf5563052ec6695.html#ab521b57b09693d8f9bf5563052ec6695">  432</a></span>&#160;<span class="keywordtype">void</span> apply_context::db_update_i64( <span class="keywordtype">int</span> iterator, <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> payer, <span class="keyword">const</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; table_obj = keyval_cache.get_table( obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_ae3ae27936105009f22fecae2b47bc1af.html#ae3ae27936105009f22fecae2b47bc1af">t_id</a> );</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   FC_ASSERT( table_obj.code == receiver, <span class="stringliteral">&quot;db access violation&quot;</span> );</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">//   require_write_lock( table_obj.scope );</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keyword">const</span> int64_t overhead = config::billable_size_v&lt;key_value_object&gt;;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   int64_t old_size = (int64_t)(obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">value</a>.size() + overhead);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   int64_t new_size = (int64_t)(buffer_size + overhead);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">if</span>( payer == <a class="code" href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">account_name</a>() ) payer = obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">payer</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">if</span>( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a>(obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">payer</a>) != payer ) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="comment">// refund the existing payer</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      update_db_usage( obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">payer</a>,  -(old_size) );</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// charge the new payer</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      update_db_usage( payer,  (new_size));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(old_size != new_size) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="comment">// charge/refund the existing payer the difference</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      update_db_usage( obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">payer</a>, new_size - old_size);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   }</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   db.modify( obj, [&amp;]( <span class="keyword">auto</span>&amp; o ) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;     o.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">value</a>.resize( buffer_size );</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;     <a class="code" href="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5.html#a52e0d440fe9232cd5ccd7649dd145ec5">memcpy</a>( o.value.data(), buffer, buffer_size );</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;     o.payer = payer;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   });</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a30b1d7686e7bef1bb7d0b6aa9de7e184.html#a30b1d7686e7bef1bb7d0b6aa9de7e184">  463</a></span>&#160;<span class="keywordtype">void</span> apply_context::db_remove_i64( <span class="keywordtype">int</span> iterator ) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; table_obj = keyval_cache.get_table( obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_ae3ae27936105009f22fecae2b47bc1af.html#ae3ae27936105009f22fecae2b47bc1af">t_id</a> );</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   FC_ASSERT( table_obj.code == receiver, <span class="stringliteral">&quot;db access violation&quot;</span> );</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">//   require_write_lock( table_obj.scope );</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   update_db_usage( obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">payer</a>,  -(obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">value</a>.size() + config::billable_size_v&lt;key_value_object&gt;) );</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   db.modify( table_obj, [&amp;]( <span class="keyword">auto</span>&amp; t ) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      --t.count;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   });</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   db.remove( obj );</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">if</span> (table_obj.count == 0) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      remove_table(table_obj);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   keyval_cache.remove( iterator );</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a6de1c96111c0236cba7f211bcda3d1a3.html#a6de1c96111c0236cba7f211bcda3d1a3">  485</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_get_i64( <span class="keywordtype">int</span> iterator, <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffer_size ) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>&amp; obj = keyval_cache.get( iterator );</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keyword">auto</span> s = obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">value</a>.size();</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keywordflow">if</span>( buffer_size == 0 ) <span class="keywordflow">return</span> s;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keyword">auto</span> copy_size = std::min( buffer_size, s );</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5.html#a52e0d440fe9232cd5ccd7649dd145ec5">memcpy</a>( buffer, obj.<a class="code" href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">value</a>.data(), copy_size );</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">return</span> copy_size;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a5aad1e553ce140ef7003c2e81547c0a6.html#a5aad1e553ce140ef7003c2e81547c0a6">  497</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_next_i64( <span class="keywordtype">int</span> iterator, uint64_t&amp; primary ) {</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <span class="keywordflow">if</span>( iterator &lt; -1 ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot increment past end iterator of table</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = keyval_cache.get( iterator ); <span class="comment">// Check for iterator != -1 happens in this call</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = db.get_index&lt;<a class="code" href="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f.html#aeb54dc422fa3fcbf3f8c2df1793da46f">key_value_index</a>, by_scope_primary&gt;();</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keyword">auto</span> itr = idx.iterator_to( obj );</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   ++itr;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">if</span>( itr == idx.end() || itr-&gt;t_id != obj.t_id ) <span class="keywordflow">return</span> keyval_cache.get_end_iterator_by_table_id(obj.t_id);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   primary = itr-&gt;primary_key;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a241647996511a2502db74d1a0ec4db60.html#a241647996511a2502db74d1a0ec4db60">  512</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_previous_i64( <span class="keywordtype">int</span> iterator, uint64_t&amp; primary ) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = db.get_index&lt;<a class="code" href="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f.html#aeb54dc422fa3fcbf3f8c2df1793da46f">key_value_index</a>, by_scope_primary&gt;();</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">if</span>( iterator &lt; -1 ) <span class="comment">// is end iterator</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   {</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keyword">auto</span> tab = keyval_cache.find_table_by_end_iterator(iterator);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      FC_ASSERT( tab, <span class="stringliteral">&quot;not a valid end iterator&quot;</span> );</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keyword">auto</span> itr = idx.upper_bound(tab-&gt;id);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">if</span>( idx.begin() == idx.end() || itr == idx.begin() ) <span class="keywordflow">return</span> -1; <span class="comment">// Empty table</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      --itr;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> -1; <span class="comment">// Empty table</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      primary = itr-&gt;primary_key;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">return</span> keyval_cache.add(*itr);</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; obj = keyval_cache.get(iterator); <span class="comment">// Check for iterator != -1 happens in this call</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keyword">auto</span> itr = idx.iterator_to(obj);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordflow">if</span>( itr == idx.begin() ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot decrement past beginning iterator of table</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   --itr;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keywordflow">if</span>( itr-&gt;t_id != obj.t_id ) <span class="keywordflow">return</span> -1; <span class="comment">// cannot decrement past beginning iterator of table</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   primary = itr-&gt;primary_key;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add(*itr);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;}</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ad298d2fb6060e38d42ba846aa44c3f14.html#ad298d2fb6060e38d42ba846aa44c3f14">  544</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_find_i64( uint64_t <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, uint64_t scope, uint64_t table, uint64_t <span class="keywordtype">id</span> ) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table );</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keyword">const</span> <a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>* obj = db.find&lt;<a class="code" href="structeosio_1_1chain_1_1key__value__object.html">key_value_object</a>, by_scope_primary&gt;( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">if</span>( !obj ) <span class="keywordflow">return</span> table_end_itr;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add( *obj );</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ae2206177ec2276a413b61632965fd434.html#ae2206177ec2276a413b61632965fd434">  558</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_lowerbound_i64( uint64_t <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, uint64_t scope, uint64_t table, uint64_t <span class="keywordtype">id</span> ) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table );</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = db.get_index&lt;<a class="code" href="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f.html#aeb54dc422fa3fcbf3f8c2df1793da46f">key_value_index</a>, by_scope_primary&gt;();</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keyword">auto</span> itr = idx.lower_bound( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">if</span>( itr == idx.end() ) <span class="keywordflow">return</span> table_end_itr;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> table_end_itr;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_ab527bb7295005dd18ccfa41d9bc3b17e.html#ab527bb7295005dd18ccfa41d9bc3b17e">  574</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_upperbound_i64( uint64_t <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, uint64_t scope, uint64_t table, uint64_t <span class="keywordtype">id</span> ) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table );</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">auto</span> table_end_itr = keyval_cache.cache_table( *tab );</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; idx = db.get_index&lt;<a class="code" href="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f.html#aeb54dc422fa3fcbf3f8c2df1793da46f">key_value_index</a>, by_scope_primary&gt;();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <span class="keyword">auto</span> itr = idx.upper_bound( boost::make_tuple( tab-&gt;id, <span class="keywordtype">id</span> ) );</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">if</span>( itr == idx.end() ) <span class="keywordflow">return</span> table_end_itr;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">if</span>( itr-&gt;t_id != tab-&gt;id ) <span class="keywordflow">return</span> table_end_itr;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">return</span> keyval_cache.add( *itr );</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a8d061b2633766a83c29ba24a273b6a17.html#a8d061b2633766a83c29ba24a273b6a17">  590</a></span>&#160;<span class="keywordtype">int</span> apply_context::db_end_i64( uint64_t <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, uint64_t scope, uint64_t table ) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="comment">//require_read_lock( code, scope ); // redundant?</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>* tab = find_table( <a class="code" href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">code</a>, scope, table );</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">if</span>( !tab ) <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <span class="keywordflow">return</span> keyval_cache.cache_table( *tab );</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_aaef35f7b11dd26e0a2a20cdf3d5dc777.html#aaef35f7b11dd26e0a2a20cdf3d5dc777">  599</a></span>&#160;uint64_t apply_context::next_global_sequence() {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; p = control.get_dynamic_global_properties();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   db.modify( p, [&amp;]( <span class="keyword">auto</span>&amp; dgp ) {</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      ++dgp.global_action_sequence;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   });</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">return</span> p.global_action_sequence;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a32d178315f034cdf062db5ea76501a70.html#a32d178315f034cdf062db5ea76501a70">  607</a></span>&#160;uint64_t apply_context::next_recv_sequence( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> receiver ) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rs = db.get&lt;<a class="code" href="classeosio_1_1chain_1_1account__sequence__object.html">account_sequence_object</a>,by_name&gt;( receiver );</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   db.modify( rs, [&amp;]( <span class="keyword">auto</span>&amp; mrs ) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      ++mrs.recv_sequence;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   });</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">return</span> rs.recv_sequence;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div><div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="classeosio_1_1chain_1_1apply__context_a21373c534ecde86e2a93b8df0510c83d.html#a21373c534ecde86e2a93b8df0510c83d">  614</a></span>&#160;uint64_t apply_context::next_auth_sequence( <a class="code" href="structeosio_1_1chain_1_1name.html">account_name</a> actor ) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keyword">const</span> <span class="keyword">auto</span>&amp; rs = db.get&lt;<a class="code" href="classeosio_1_1chain_1_1account__sequence__object.html">account_sequence_object</a>,by_name&gt;( actor );</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   db.modify( rs, [&amp;](<span class="keyword">auto</span>&amp; mrs ){</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      ++mrs.auth_sequence;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   });</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordflow">return</span> rs.auth_sequence;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;} } </div><div class="ttc" id="classeosio_1_1chain_1_1apply__context_ad9084470e2054e614c58d55d431f11cd_html_ad9084470e2054e614c58d55d431f11cd"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ad9084470e2054e614c58d55d431f11cd.html#ad9084470e2054e614c58d55d431f11cd">eosio::chain::apply_context::used_authorizations</a></div><div class="ttdeci">vector&lt; bool &gt; used_authorizations</div><div class="ttdoc">Parallel to act.authorization; tracks which permissions have been used while processing the message...</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00589">apply_context.hpp:589</a></div></div>
<div class="ttc" id="namespaceeosio_html"><div class="ttname"><a href="namespaceeosio.html">eosio</a></div><div class="ttdef"><b>Definition:</b> <a href="abi__serializer_8cpp_source.html#l00017">abi_serializer.cpp:17</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637_html_a55f81ebe1dc903a6fd040ca15725d637"><div class="ttname"><a href="structeosio_1_1chain_1_1key__value__object_a55f81ebe1dc903a6fd040ca15725d637.html#a55f81ebe1dc903a6fd040ca15725d637">eosio::chain::key_value_object::payer</a></div><div class="ttdeci">account_name payer</div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00066">contract_table_objects.hpp:66</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431_html_a82ddb2ddce828f7ee8d0d9fd11960431"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a82ddb2ddce828f7ee8d0d9fd11960431.html#a82ddb2ddce828f7ee8d0d9fd11960431">eosio::chain::apply_context::trx_context</a></div><div class="ttdeci">transaction_context &amp; trx_context</div><div class="ttdoc">transaction context in which the action is running </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00586">apply_context.hpp:586</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_ad2a4be0842299e77224a156861ba27ca_html_ad2a4be0842299e77224a156861ba27ca"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ad2a4be0842299e77224a156861ba27ca.html#ad2a4be0842299e77224a156861ba27ca">eosio::chain::apply_context::recurse_depth</a></div><div class="ttdeci">uint32_t recurse_depth</div><div class="ttdoc">how deep inline actions can recurse </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00590">apply_context.hpp:590</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1authorization__manager_ae925415529209b8f0ef9987479a866b5_html_ae925415529209b8f0ef9987479a866b5"><div class="ttname"><a href="classeosio_1_1chain_1_1authorization__manager_ae925415529209b8f0ef9987479a866b5.html#ae925415529209b8f0ef9987479a866b5">eosio::chain::authorization_manager::check_authorization</a></div><div class="ttdeci">void check_authorization(const vector&lt; action &gt; &amp;actions, const flat_set&lt; public_key_type &gt; &amp;provided_keys, const flat_set&lt; permission_level &gt; &amp;provided_permissions=flat_set&lt; permission_level &gt;(), fc::microseconds provided_delay=fc::microseconds(0), const std::function&lt; void()&gt; &amp;checktime=std::function&lt; void()&gt;(), bool allow_unused_keys=false) const</div><div class="ttdoc">Check authorizations of a vector of actions with provided keys, permission levels, and delay. </div><div class="ttdef"><b>Definition:</b> <a href="authorization__manager_8cpp_source.html#l00322">authorization_manager.cpp:322</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1account__object_html"><div class="ttname"><a href="classeosio_1_1chain_1_1account__object.html">eosio::chain::account_object</a></div><div class="ttdef"><b>Definition:</b> <a href="account__object_8hpp_source.html#l00015">account_object.hpp:15</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_a3b722c3391611b3f9afecad3ddc332a0_html_a3b722c3391611b3f9afecad3ddc332a0"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_a3b722c3391611b3f9afecad3ddc332a0.html#a3b722c3391611b3f9afecad3ddc332a0">eosio::chain::action_receipt::global_sequence</a></div><div class="ttdeci">uint64_t global_sequence</div><div class="ttdoc">total number of actions dispatched since genesis </div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00017">action_receipt.hpp:17</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_a08437dea175f505898daab0365ce94a7_html_a08437dea175f505898daab0365ce94a7"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_a08437dea175f505898daab0365ce94a7.html#a08437dea175f505898daab0365ce94a7">eosio::chain::action_receipt::act_digest</a></div><div class="ttdeci">digest_type act_digest</div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00016">action_receipt.hpp:16</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71_html_adc59eed073b4e86fd688fbca54b85c71"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_adc59eed073b4e86fd688fbca54b85c71.html#adc59eed073b4e86fd688fbca54b85c71">eosio::chain::apply_context::trace</a></div><div class="ttdeci">action_trace trace</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00601">apply_context.hpp:601</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_aca43527cf72e44ecea20b4fbc4c0befb_html_aca43527cf72e44ecea20b4fbc4c0befb"><div class="ttname"><a href="namespaceeosio_1_1chain_aca43527cf72e44ecea20b4fbc4c0befb.html#aca43527cf72e44ecea20b4fbc4c0befb">eosio::chain::bytes</a></div><div class="ttdeci">vector&lt; char &gt; bytes</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00171">types.hpp:171</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_ac44cfb3fa2ece7d456d9159f4afd9fe0_html_ac44cfb3fa2ece7d456d9159f4afd9fe0"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_ac44cfb3fa2ece7d456d9159f4afd9fe0.html#ac44cfb3fa2ece7d456d9159f4afd9fe0">eosio::chain::controller::contracts_console</a></div><div class="ttdeci">bool contracts_console() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01346">controller.cpp:1346</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a_html_a41392a69085f8138021b914c83e6ed9a"><div class="ttname"><a href="structeosio_1_1chain_1_1action_a41392a69085f8138021b914c83e6ed9a.html#a41392a69085f8138021b914c83e6ed9a">eosio::chain::action::authorization</a></div><div class="ttdeci">vector&lt; permission_level &gt; authorization</div><div class="ttdef"><b>Definition:</b> <a href="action_8hpp_source.html#l00062">action.hpp:62</a></div></div>
<div class="ttc" id="exceptions_8hpp_html"><div class="ttname"><a href="exceptions_8hpp.html">exceptions.hpp</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1base__action__trace_aa9f6c0fd14317a574f837d43675a1cf3_html_aa9f6c0fd14317a574f837d43675a1cf3"><div class="ttname"><a href="structeosio_1_1chain_1_1base__action__trace_aa9f6c0fd14317a574f837d43675a1cf3.html#aa9f6c0fd14317a574f837d43675a1cf3">eosio::chain::base_action_trace::console</a></div><div class="ttdeci">string console</div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00021">trace.hpp:21</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1chain__config_a4a6a0876bf859489cec39d8630354349_html_a4a6a0876bf859489cec39d8630354349"><div class="ttname"><a href="structeosio_1_1chain_1_1chain__config_a4a6a0876bf859489cec39d8630354349.html#a4a6a0876bf859489cec39d8630354349">eosio::chain::chain_config::max_inline_action_depth</a></div><div class="ttdeci">uint16_t max_inline_action_depth</div><div class="ttdoc">recursion depth limit on sending inline actions </div><div class="ttdef"><b>Definition:</b> <a href="chain__config_8hpp_source.html#l00037">chain_config.hpp:37</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99_html_ab7c72df6e46d3160e28fb22a41a81e99"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ab7c72df6e46d3160e28fb22a41a81e99.html#ab7c72df6e46d3160e28fb22a41a81e99">eosio::chain::apply_context::exec_one</a></div><div class="ttdeci">action_trace exec_one()</div><div class="ttdoc">Execution methods: </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00032">apply_context.cpp:32</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027_html_acb7da5c1a4b112407ec04940c044a027"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_acb7da5c1a4b112407ec04940c044a027.html#acb7da5c1a4b112407ec04940c044a027">eosio::chain::apply_context::control</a></div><div class="ttdeci">controller &amp; control</div><div class="ttdoc">Fields: </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00584">apply_context.hpp:584</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1generated__transaction__object_html"><div class="ttname"><a href="classeosio_1_1chain_1_1generated__transaction__object.html">eosio::chain::generated_transaction_object</a></div><div class="ttdef"><b>Definition:</b> <a href="generated__transaction__object_8hpp_source.html#l00025">generated_transaction_object.hpp:25</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__trace_html"><div class="ttname"><a href="structeosio_1_1chain_1_1action__trace.html">eosio::chain::action_trace</a></div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00027">trace.hpp:27</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1key__value__object_ae3ae27936105009f22fecae2b47bc1af_html_ae3ae27936105009f22fecae2b47bc1af"><div class="ttname"><a href="structeosio_1_1chain_1_1key__value__object_ae3ae27936105009f22fecae2b47bc1af.html#ae3ae27936105009f22fecae2b47bc1af">eosio::chain::key_value_object::t_id</a></div><div class="ttdeci">table_id t_id</div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00064">contract_table_objects.hpp:64</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b_html_a4eff4c3a5ad1e8e813e0087e2f72c17b"><div class="ttname"><a href="namespaceeosio_1_1chain_1_1wasm__ops_a4eff4c3a5ad1e8e813e0087e2f72c17b.html#a4eff4c3a5ad1e8e813e0087e2f72c17b">eosio::chain::wasm_ops::code</a></div><div class="ttdeci">code</div><div class="ttdef"><b>Definition:</b> <a href="wasm__eosio__binary__ops_8hpp_source.html#l00349">wasm_eosio_binary_ops.hpp:349</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62_html_ab342238f129ee20abed3257c6d023b62"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_ab342238f129ee20abed3257c6d023b62.html#ab342238f129ee20abed3257c6d023b62">eosio::chain::transaction_context::checktime</a></div><div class="ttdeci">void checktime() const</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8cpp_source.html#l00283">transaction_context.cpp:283</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_af82870b5127b8c5789d7d1cddffc1765_html_af82870b5127b8c5789d7d1cddffc1765"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_af82870b5127b8c5789d7d1cddffc1765.html#af82870b5127b8c5789d7d1cddffc1765">eosio::chain::apply_context::has_recipient</a></div><div class="ttdeci">bool has_recipient(account_name account) const</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00153">apply_context.cpp:153</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a_html_a675086138c644442ef3a084e027a7d5a"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a675086138c644442ef3a084e027a7d5a.html#a675086138c644442ef3a084e027a7d5a">eosio::chain::controller::pending_block_time</a></div><div class="ttdeci">time_point pending_block_time() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01216">controller.cpp:1216</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a191a975c11c36e90758dae4d5f83cd73_html_a191a975c11c36e90758dae4d5f83cd73"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a191a975c11c36e90758dae4d5f83cd73.html#a191a975c11c36e90758dae4d5f83cd73">eosio::chain::apply_context::execute_context_free_inline</a></div><div class="ttdeci">void execute_context_free_inline(action &amp;&amp;a)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00215">apply_context.cpp:215</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a0d8b506bb45fb4500ea5f48ca84c628b_html_a0d8b506bb45fb4500ea5f48ca84c628b"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a0d8b506bb45fb4500ea5f48ca84c628b.html#a0d8b506bb45fb4500ea5f48ca84c628b">eosio::chain::apply_context::execute_inline</a></div><div class="ttdeci">void execute_inline(action &amp;&amp;a)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00182">apply_context.cpp:182</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97_html_ad2fb55619692b78f2bcc3eba5c643b97"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ad2fb55619692b78f2bcc3eba5c643b97.html#ad2fb55619692b78f2bcc3eba5c643b97">eosio::chain::apply_context::act</a></div><div class="ttdeci">const action &amp; act</div><div class="ttdoc">message being applied </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00587">apply_context.hpp:587</a></div></div>
<div class="ttc" id="global__property__object_8hpp_html"><div class="ttname"><a href="global__property__object_8hpp.html">global_property_object.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61_html_a9930df49c104d3bf80199c7bb8e6dd61"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a9930df49c104d3bf80199c7bb8e6dd61.html#a9930df49c104d3bf80199c7bb8e6dd61">eosio::chain::transaction_context::id</a></div><div class="ttdeci">transaction_id_type id</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00060">transaction_context.hpp:60</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_a7155ee49e532ecbc7998d518309d1522_html_a7155ee49e532ecbc7998d518309d1522"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_a7155ee49e532ecbc7998d518309d1522.html#a7155ee49e532ecbc7998d518309d1522">eosio::chain::action_receipt::abi_sequence</a></div><div class="ttdeci">fc::unsigned_int abi_sequence</div><div class="ttdoc">total number of setabis </div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00021">action_receipt.hpp:21</a></div></div>
<div class="ttc" id="transaction__context_8hpp_html"><div class="ttname"><a href="transaction__context_8hpp.html">transaction_context.hpp</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f_html_aeb54dc422fa3fcbf3f8c2df1793da46f"><div class="ttname"><a href="namespaceeosio_1_1chain_aeb54dc422fa3fcbf3f8c2df1793da46f.html#aeb54dc422fa3fcbf3f8c2df1793da46f">eosio::chain::key_value_index</a></div><div class="ttdeci">chainbase::shared_multi_index_container&lt; key_value_object, indexed_by&lt; ordered_unique&lt; tag&lt; by_id &gt;, member&lt; key_value_object, key_value_object::id_type, &amp;key_value_object::id &gt; &gt;, ordered_unique&lt; tag&lt; by_scope_primary &gt;, composite_key&lt; key_value_object, member&lt; key_value_object, table_id, &amp;key_value_object::t_id &gt;, member&lt; key_value_object, uint64_t, &amp;key_value_object::primary_key &gt; &gt;, composite_key_compare&lt; std::less&lt; table_id &gt;, std::less&lt; uint64_t &gt; &gt; &gt; &gt; &gt; key_value_index</div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00082">contract_table_objects.hpp:82</a></div></div>
<div class="ttc" id="resource__limits_8hpp_html"><div class="ttname"><a href="resource__limits_8hpp.html">resource_limits.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a32d178315f034cdf062db5ea76501a70_html_a32d178315f034cdf062db5ea76501a70"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a32d178315f034cdf062db5ea76501a70.html#a32d178315f034cdf062db5ea76501a70">eosio::chain::apply_context::next_recv_sequence</a></div><div class="ttdeci">uint64_t next_recv_sequence(account_name receiver)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00607">apply_context.cpp:607</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5_html_a52e0d440fe9232cd5ccd7649dd145ec5"><div class="ttname"><a href="namespaceeosio_1_1chain_a52e0d440fe9232cd5ccd7649dd145ec5.html#a52e0d440fe9232cd5ccd7649dd145ec5">eosio::chain::memcpy</a></div><div class="ttdeci">memcpy</div><div class="ttdef"><b>Definition:</b> <a href="wasm__interface_8cpp_source.html#l01829">wasm_interface.cpp:1829</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87_html_a30cff57349399035ecde0e58c9378b87"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a30cff57349399035ecde0e58c9378b87.html#a30cff57349399035ecde0e58c9378b87">eosio::chain::transaction_context::published</a></div><div class="ttdeci">fc::time_point published</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00065">transaction_context.hpp:65</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db_html_a1edcfdea2702642575c8901c91f1d0db"><div class="ttname"><a href="structeosio_1_1chain_1_1key__value__object_a1edcfdea2702642575c8901c91f1d0db.html#a1edcfdea2702642575c8901c91f1d0db">eosio::chain::key_value_object::value</a></div><div class="ttdeci">shared_string value</div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00067">contract_table_objects.hpp:67</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action_html"><div class="ttname"><a href="structeosio_1_1chain_1_1action.html">eosio::chain::action</a></div><div class="ttdef"><b>Definition:</b> <a href="action_8hpp_source.html#l00059">action.hpp:59</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584_html_a5c927b6a4cc85cdefe99b1a48034e584"><div class="ttname"><a href="namespaceeosio_1_1chain_a5c927b6a4cc85cdefe99b1a48034e584.html#a5c927b6a4cc85cdefe99b1a48034e584">eosio::chain::action_validate_exception</a></div><div class="ttdeci">chain type exception Invalid public key Invalid authority Invalid transaction No ABI found Invalid transaction ID Invalid asset unlinkable block transaction outputs in block do not match transaction outputs from applying block shard locks in block are incorrect or mal formed block is too old to push Error decompressing transaction transaction should have at least one required authority Expired Transaction Invalid Reference Block duplicate deferred transaction action_validate_exception</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00168">exceptions.hpp:168</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a22b686c4acfc848d68bb63172932a396_html_a22b686c4acfc848d68bb63172932a396"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a22b686c4acfc848d68bb63172932a396.html#a22b686c4acfc848d68bb63172932a396">eosio::chain::apply_context::require_recipient</a></div><div class="ttdeci">void require_recipient(account_name account)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00160">apply_context.cpp:160</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a2a6ac63b9768874ce104b8c14759334b_html_a2a6ac63b9768874ce104b8c14759334b"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a2a6ac63b9768874ce104b8c14759334b.html#a2a6ac63b9768874ce104b8c14759334b">eosio::chain::apply_context::db</a></div><div class="ttdeci">chainbase::database &amp; db</div><div class="ttdoc">database where state is stored </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00585">apply_context.hpp:585</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_a35a92253c2fedad87be7239ce76d4f34_html_a35a92253c2fedad87be7239ce76d4f34"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_a35a92253c2fedad87be7239ce76d4f34.html#a35a92253c2fedad87be7239ce76d4f34">eosio::chain::action_receipt::receiver</a></div><div class="ttdeci">account_name receiver</div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00015">action_receipt.hpp:15</a></div></div>
<div class="ttc" id="account__object_8hpp_html"><div class="ttname"><a href="account__object_8hpp.html">account_object.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a00f6845fc8587da5f9b4b1aa5e0d4115_html_a00f6845fc8587da5f9b4b1aa5e0d4115"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a00f6845fc8587da5f9b4b1aa5e0d4115.html#a00f6845fc8587da5f9b4b1aa5e0d4115">eosio::chain::controller::find_apply_handler</a></div><div class="ttdeci">const apply_handler * find_apply_handler(account_name contract, scope_name scope, action_name act) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01354">controller.cpp:1354</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action_a902d64826c6d06f1ccb4be01bb7353a2_html_a902d64826c6d06f1ccb4be01bb7353a2"><div class="ttname"><a href="structeosio_1_1chain_1_1action_a902d64826c6d06f1ccb4be01bb7353a2.html#a902d64826c6d06f1ccb4be01bb7353a2">eosio::chain::action::name</a></div><div class="ttdeci">action_name name</div><div class="ttdef"><b>Definition:</b> <a href="action_8hpp_source.html#l00061">action.hpp:61</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7_html_aeb6717d56587c2fa9114c2e6c61d47a7"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_aeb6717d56587c2fa9114c2e6c61d47a7.html#aeb6717d56587c2fa9114c2e6c61d47a7">eosio::chain::apply_context::receiver</a></div><div class="ttdeci">account_name receiver</div><div class="ttdoc">the code that is currently running </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00588">apply_context.hpp:588</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a36cb81932332b79fb3e045087f1a65bc_html_a36cb81932332b79fb3e045087f1a65bc"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a36cb81932332b79fb3e045087f1a65bc.html#a36cb81932332b79fb3e045087f1a65bc">eosio::chain::apply_context::exec</a></div><div class="ttdeci">void exec()</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00093">apply_context.cpp:93</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1wasm__exit_html"><div class="ttname"><a href="structeosio_1_1chain_1_1wasm__exit.html">eosio::chain::wasm_exit</a></div><div class="ttdef"><b>Definition:</b> <a href="wasm__interface_8hpp_source.html#l00011">wasm_interface.hpp:11</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1authorization__manager_a27421e55aa9490ec47637535be08eed5_html_a27421e55aa9490ec47637535be08eed5"><div class="ttname"><a href="classeosio_1_1chain_1_1authorization__manager_a27421e55aa9490ec47637535be08eed5.html#a27421e55aa9490ec47637535be08eed5">eosio::chain::authorization_manager::find_permission</a></div><div class="ttdeci">const permission_object * find_permission(const permission_level &amp;level) const</div><div class="ttdef"><b>Definition:</b> <a href="authorization__manager_8cpp_source.html#l00113">authorization_manager.cpp:113</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action_adb73e3a236a3c11c104c6dd6ebad9429_html_adb73e3a236a3c11c104c6dd6ebad9429"><div class="ttname"><a href="structeosio_1_1chain_1_1action_adb73e3a236a3c11c104c6dd6ebad9429.html#adb73e3a236a3c11c104c6dd6ebad9429">eosio::chain::action::account</a></div><div class="ttdeci">account_name account</div><div class="ttdef"><b>Definition:</b> <a href="action_8hpp_source.html#l00060">action.hpp:60</a></div></div>
<div class="ttc" id="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16_html_a2cb5d7112457a24df46ffcd923270e16"><div class="ttname"><a href="exceptions_8hpp_a2cb5d7112457a24df46ffcd923270e16.html#a2cb5d7112457a24df46ffcd923270e16">EOS_ASSERT</a></div><div class="ttdeci">#define EOS_ASSERT(expr, exc_type, FORMAT,...)</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00012">exceptions.hpp:12</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774_html_a826f8feab4d745ad1ae6ce3daff85774"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a826f8feab4d745ad1ae6ce3daff85774.html#a826f8feab4d745ad1ae6ce3daff85774">eosio::chain::controller::get_global_properties</a></div><div class="ttdeci">const global_property_object &amp; get_global_properties() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01239">controller.cpp:1239</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf_html_ad6e015097a10f08028a3e3df3b17ecdf"><div class="ttname"><a href="namespaceeosio_1_1chain_ad6e015097a10f08028a3e3df3b17ecdf.html#ad6e015097a10f08028a3e3df3b17ecdf">eosio::chain::transaction_exception</a></div><div class="ttdeci">chain type exception Invalid public key Invalid authority Invalid transaction No ABI found Invalid transaction ID Invalid asset unlinkable block transaction outputs in block do not match transaction outputs from applying block shard locks in block are incorrect or mal formed block is too old to push transaction_exception</div><div class="ttdef"><b>Definition:</b> <a href="exceptions_8hpp_source.html#l00145">exceptions.hpp:145</a></div></div>
<div class="ttc" id="apply__context_8hpp_html"><div class="ttname"><a href="apply__context_8hpp.html">apply_context.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1account__sequence__object_html"><div class="ttname"><a href="classeosio_1_1chain_1_1account__sequence__object.html">eosio::chain::account_sequence_object</a></div><div class="ttdef"><b>Definition:</b> <a href="account__object_8hpp_source.html#l00057">account_object.hpp:57</a></div></div>
<div class="ttc" id="authorization__manager_8hpp_html"><div class="ttname"><a href="authorization__manager_8hpp.html">authorization_manager.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a21373c534ecde86e2a93b8df0510c83d_html_a21373c534ecde86e2a93b8df0510c83d"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a21373c534ecde86e2a93b8df0510c83d.html#a21373c534ecde86e2a93b8df0510c83d">eosio::chain::apply_context::next_auth_sequence</a></div><div class="ttdeci">uint64_t next_auth_sequence(account_name actor)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00614">apply_context.cpp:614</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a1e7717a03a5d45f1b1dd608077a7dc29_html_a1e7717a03a5d45f1b1dd608077a7dc29"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a1e7717a03a5d45f1b1dd608077a7dc29.html#a1e7717a03a5d45f1b1dd608077a7dc29">eosio::chain::apply_context::require_authorization</a></div><div class="ttdeci">void require_authorization(const account_name &amp;account)</div><div class="ttdoc">Authorization methods: </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00123">apply_context.cpp:123</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_aa21275c4089a29d9b84c30a95fab0efe_html_aa21275c4089a29d9b84c30a95fab0efe"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_aa21275c4089a29d9b84c30a95fab0efe.html#aa21275c4089a29d9b84c30a95fab0efe">eosio::chain::controller::is_producing_block</a></div><div class="ttdeci">bool is_producing_block() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01406">controller.cpp:1406</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_a768f16e802e7d0f3c7a68b371d4b430c_html_a768f16e802e7d0f3c7a68b371d4b430c"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_a768f16e802e7d0f3c7a68b371d4b430c.html#a768f16e802e7d0f3c7a68b371d4b430c">eosio::chain::action_receipt::recv_sequence</a></div><div class="ttdeci">uint64_t recv_sequence</div><div class="ttdoc">total number of actions with this receiver since genesis </div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00018">action_receipt.hpp:18</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_aba016ab56f573736f621cb09b905ce9a_html_aba016ab56f573736f621cb09b905ce9a"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_aba016ab56f573736f621cb09b905ce9a.html#aba016ab56f573736f621cb09b905ce9a">eosio::chain::action_receipt::auth_sequence</a></div><div class="ttdeci">flat_map&lt; account_name, uint64_t &gt; auth_sequence</div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00019">action_receipt.hpp:19</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c_html_a94ea8ef67fa6f14be28a95a78260df9c"><div class="ttname"><a href="structeosio_1_1chain_1_1action__trace_a94ea8ef67fa6f14be28a95a78260df9c.html#a94ea8ef67fa6f14be28a95a78260df9c">eosio::chain::action_trace::inline_traces</a></div><div class="ttdeci">vector&lt; action_trace &gt; inline_traces</div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00030">trace.hpp:30</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_ad290d6b9a4d003ee22086695a92a1667_html_ad290d6b9a4d003ee22086695a92a1667"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_ad290d6b9a4d003ee22086695a92a1667.html#ad290d6b9a4d003ee22086695a92a1667">eosio::chain::controller::get_account</a></div><div class="ttdeci">const account_object &amp; get_account(account_name n) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01368">controller.cpp:1368</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a81444eacf323dd782c2215967931af3d_html_a81444eacf323dd782c2215967931af3d"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a81444eacf323dd782c2215967931af3d.html#a81444eacf323dd782c2215967931af3d">eosio::chain::controller::skip_auth_check</a></div><div class="ttdeci">bool skip_auth_check() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01342">controller.cpp:1342</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1name_html"><div class="ttname"><a href="structeosio_1_1chain_1_1name.html">eosio::chain::name</a></div><div class="ttdef"><b>Definition:</b> <a href="name_8hpp_source.html#l00042">name.hpp:42</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1base__action__trace_a6ae01ece9e3fcd499f299be2a90f0e7f_html_a6ae01ece9e3fcd499f299be2a90f0e7f"><div class="ttname"><a href="structeosio_1_1chain_1_1base__action__trace_a6ae01ece9e3fcd499f299be2a90f0e7f.html#a6ae01ece9e3fcd499f299be2a90f0e7f">eosio::chain::base_action_trace::trx_id</a></div><div class="ttdeci">transaction_id_type trx_id</div><div class="ttdoc">total of inline_traces[x].cpu_usage + cpu_usage </div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00024">trace.hpp:24</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1transaction_html"><div class="ttname"><a href="structeosio_1_1chain_1_1transaction.html">eosio::chain::transaction</a></div><div class="ttdef"><b>Definition:</b> <a href="transaction_8hpp_source.html#l00054">transaction.hpp:54</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a309aa422b43ee91cfd52cd68ad4edc50_html_a309aa422b43ee91cfd52cd68ad4edc50"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a309aa422b43ee91cfd52cd68ad4edc50.html#a309aa422b43ee91cfd52cd68ad4edc50">eosio::chain::apply_context::reset_console</a></div><div class="ttdeci">void reset_console()</div><div class="ttdoc">Console methods: </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00343">apply_context.cpp:343</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a7082035ec94c5379896cea7c61f6b721_html_a7082035ec94c5379896cea7c61f6b721"><div class="ttname"><a href="namespaceeosio_1_1chain_a7082035ec94c5379896cea7c61f6b721.html#a7082035ec94c5379896cea7c61f6b721">eosio::chain::uint128_t</a></div><div class="ttdeci">unsigned __int128 uint128_t</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00170">types.hpp:170</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_1_1wasm__ops_a46b5a83fe49f18aeefa8d583086395e1_html_a46b5a83fe49f18aeefa8d583086395e1"><div class="ttname"><a href="namespaceeosio_1_1chain_1_1wasm__ops_a46b5a83fe49f18aeefa8d583086395e1.html#a46b5a83fe49f18aeefa8d583086395e1">eosio::chain::wasm_ops::pack</a></div><div class="ttdeci">void pack(instruction_stream *stream, uint32_t field)</div><div class="ttdef"><b>Definition:</b> <a href="wasm__eosio__binary__ops_8hpp_source.html#l00104">wasm_eosio_binary_ops.hpp:104</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a113a4fa08534159756415238097d0b2b_html_a113a4fa08534159756415238097d0b2b"><div class="ttname"><a href="namespaceeosio_1_1chain_a113a4fa08534159756415238097d0b2b.html#a113a4fa08534159756415238097d0b2b">eosio::chain::generated_transaction_multi_index</a></div><div class="ttdeci">chainbase::shared_multi_index_container&lt; generated_transaction_object, indexed_by&lt; ordered_unique&lt; tag&lt; by_id &gt;, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, generated_transaction_object::id_type, id)&gt;, ordered_unique&lt; tag&lt; by_trx_id &gt;, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, transaction_id_type, trx_id)&gt;, ordered_unique&lt; tag&lt; by_expiration &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, time_point, expiration), &gt; &gt;, ordered_unique&lt; tag&lt; by_delay &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, time_point, delay_until), &gt; &gt;, ordered_unique&lt; tag&lt; by_sender_id &gt;, composite_key&lt; generated_transaction_object, BOOST_MULTI_INDEX_MEMBER(generated_transaction_object, account_name, sender), &gt; &gt; &gt; &gt; generated_transaction_multi_index</div><div class="ttdef"><b>Definition:</b> <a href="generated__transaction__object_8hpp_source.html#l00078">generated_transaction_object.hpp:78</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a5783134f223585dfc187a56716b5da22_html_a5783134f223585dfc187a56716b5da22"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a5783134f223585dfc187a56716b5da22.html#a5783134f223585dfc187a56716b5da22">eosio::chain::controller::get_wasm_interface</a></div><div class="ttdeci">wasm_interface &amp; get_wasm_interface()</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01364">controller.cpp:1364</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae_html_a1000b2d4028aa08ddfd0b12b4c8fd4ae"><div class="ttname"><a href="classeosio_1_1chain_1_1transaction__context_a1000b2d4028aa08ddfd0b12b4c8fd4ae.html#a1000b2d4028aa08ddfd0b12b4c8fd4ae">eosio::chain::transaction_context::executed</a></div><div class="ttdeci">vector&lt; action_receipt &gt; executed</div><div class="ttdef"><b>Definition:</b> <a href="transaction__context_8hpp_source.html#l00068">transaction_context.hpp:68</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_html"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt.html">eosio::chain::action_receipt</a></div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00014">action_receipt.hpp:14</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_ad17c03b45743f34d2c2af0982b6ed8df_html_ad17c03b45743f34d2c2af0982b6ed8df"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ad17c03b45743f34d2c2af0982b6ed8df.html#ad17c03b45743f34d2c2af0982b6ed8df">eosio::chain::apply_context::is_account</a></div><div class="ttdeci">bool is_account(const account_name &amp;account) const</div><div class="ttdoc">exec() </div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00119">apply_context.cpp:119</a></div></div>
<div class="ttc" id="name_8hpp_af9c1edb0e0da55ec6ba09f32f6839529_html_af9c1edb0e0da55ec6ba09f32f6839529"><div class="ttname"><a href="name_8hpp_af9c1edb0e0da55ec6ba09f32f6839529.html#af9c1edb0e0da55ec6ba09f32f6839529">N</a></div><div class="ttdeci">#define N(X)</div><div class="ttdef"><b>Definition:</b> <a href="name_8hpp_source.html#l00040">name.hpp:40</a></div></div>
<div class="ttc" id="controller_8hpp_html"><div class="ttname"><a href="controller_8hpp.html">controller.hpp</a></div></div>
<div class="ttc" id="generated__transaction__object_8hpp_html"><div class="ttname"><a href="generated__transaction__object_8hpp.html">generated_transaction_object.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_ab54b7c01d69ba3463ec271d68e535d4a_html_ab54b7c01d69ba3463ec271d68e535d4a"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_ab54b7c01d69ba3463ec271d68e535d4a.html#ab54b7c01d69ba3463ec271d68e535d4a">eosio::chain::apply_context::schedule_deferred_transaction</a></div><div class="ttdeci">void schedule_deferred_transaction(const uint128_t &amp;sender_id, account_name payer, transaction &amp;&amp;trx, bool replace_existing)</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00227">apply_context.cpp:227</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1base__action__trace_a0b4258ae021e74a096facc7f31d2a65d_html_a0b4258ae021e74a096facc7f31d2a65d"><div class="ttname"><a href="structeosio_1_1chain_1_1base__action__trace_a0b4258ae021e74a096facc7f31d2a65d.html#a0b4258ae021e74a096facc7f31d2a65d">eosio::chain::base_action_trace::elapsed</a></div><div class="ttdeci">fc::microseconds elapsed</div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00019">trace.hpp:19</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_af6aa9a5bcc592ae08c47d4f27a1a026c_html_af6aa9a5bcc592ae08c47d4f27a1a026c"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_af6aa9a5bcc592ae08c47d4f27a1a026c.html#af6aa9a5bcc592ae08c47d4f27a1a026c">eosio::chain::controller::check_contract_list</a></div><div class="ttdeci">void check_contract_list(account_name code) const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01402">controller.cpp:1402</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1base__action__trace_a65005cbd05f2969a86beb1e2e6bfb974_html_a65005cbd05f2969a86beb1e2e6bfb974"><div class="ttname"><a href="structeosio_1_1chain_1_1base__action__trace_a65005cbd05f2969a86beb1e2e6bfb974.html#a65005cbd05f2969a86beb1e2e6bfb974">eosio::chain::base_action_trace::act</a></div><div class="ttdeci">action act</div><div class="ttdef"><b>Definition:</b> <a href="trace_8hpp_source.html#l00018">trace.hpp:18</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1key__value__object_html"><div class="ttname"><a href="structeosio_1_1chain_1_1key__value__object.html">eosio::chain::key_value_object</a></div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00057">contract_table_objects.hpp:57</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_afe66a771cfeeabcf923e45cba22bd472_html_afe66a771cfeeabcf923e45cba22bd472"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_afe66a771cfeeabcf923e45cba22bd472.html#afe66a771cfeeabcf923e45cba22bd472">eosio::chain::apply_context::has_authorization</a></div><div class="ttdeci">bool has_authorization(const account_name &amp;account) const</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00133">apply_context.cpp:133</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440_html_a5fa53b350eec65b6a826d039d0286440"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a5fa53b350eec65b6a826d039d0286440.html#a5fa53b350eec65b6a826d039d0286440">eosio::chain::controller::db</a></div><div class="ttdeci">chainbase::database &amp; db() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01151">controller.cpp:1151</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_aaef35f7b11dd26e0a2a20cdf3d5dc777_html_aaef35f7b11dd26e0a2a20cdf3d5dc777"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_aaef35f7b11dd26e0a2a20cdf3d5dc777.html#aaef35f7b11dd26e0a2a20cdf3d5dc777">eosio::chain::apply_context::next_global_sequence</a></div><div class="ttdeci">uint64_t next_global_sequence()</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8cpp_source.html#l00599">apply_context.cpp:599</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1controller_a639302daa7f85438f8df5a8fbe952160_html_a639302daa7f85438f8df5a8fbe952160"><div class="ttname"><a href="classeosio_1_1chain_1_1controller_a639302daa7f85438f8df5a8fbe952160.html#a639302daa7f85438f8df5a8fbe952160">eosio::chain::controller::get_authorization_manager</a></div><div class="ttdeci">const authorization_manager &amp; get_authorization_manager() const</div><div class="ttdef"><b>Definition:</b> <a href="controller_8cpp_source.html#l01120">controller.cpp:1120</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1action__receipt_acd76fc97cc631f9a78a5aeb1db2ea10a_html_acd76fc97cc631f9a78a5aeb1db2ea10a"><div class="ttname"><a href="structeosio_1_1chain_1_1action__receipt_acd76fc97cc631f9a78a5aeb1db2ea10a.html#acd76fc97cc631f9a78a5aeb1db2ea10a">eosio::chain::action_receipt::code_sequence</a></div><div class="ttdeci">fc::unsigned_int code_sequence</div><div class="ttdoc">total number of setcodes </div><div class="ttdef"><b>Definition:</b> <a href="action__receipt_8hpp_source.html#l00020">action_receipt.hpp:20</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1apply__context_a44d0277b781b2461d9d42f69dec87d5e_html_a44d0277b781b2461d9d42f69dec87d5e"><div class="ttname"><a href="classeosio_1_1chain_1_1apply__context_a44d0277b781b2461d9d42f69dec87d5e.html#a44d0277b781b2461d9d42f69dec87d5e">eosio::chain::apply_context::privileged</a></div><div class="ttdeci">bool privileged</div><div class="ttdef"><b>Definition:</b> <a href="apply__context_8hpp_source.html#l00591">apply_context.hpp:591</a></div></div>
<div class="ttc" id="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c_html_a2106ec5ced5c780d6cbebf6a727f910c"><div class="ttname"><a href="namespaceeosio_1_1chain_a2106ec5ced5c780d6cbebf6a727f910c.html#a2106ec5ced5c780d6cbebf6a727f910c">eosio::chain::account_name</a></div><div class="ttdeci">name account_name</div><div class="ttdef"><b>Definition:</b> <a href="types_8hpp_source.html#l00101">types.hpp:101</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1table__id__object_html"><div class="ttname"><a href="classeosio_1_1chain_1_1table__id__object.html">eosio::chain::table_id_object</a></div><div class="ttdoc">The table_id_object class tracks the mapping of (scope, code, table) to an opaque identifier...</div><div class="ttdef"><b>Definition:</b> <a href="contract__table__objects_8hpp_source.html#l00021">contract_table_objects.hpp:21</a></div></div>
<div class="ttc" id="wasm__interface_8hpp_html"><div class="ttname"><a href="wasm__interface_8hpp.html">wasm_interface.hpp</a></div></div>
<div class="ttc" id="classeosio_1_1chain_1_1wasm__interface_a9986d0881fd8557db66d709f79edca63_html_a9986d0881fd8557db66d709f79edca63"><div class="ttname"><a href="classeosio_1_1chain_1_1wasm__interface_a9986d0881fd8557db66d709f79edca63.html#a9986d0881fd8557db66d709f79edca63">eosio::chain::wasm_interface::apply</a></div><div class="ttdeci">void apply(const digest_type &amp;code_id, const shared_string &amp;code, apply_context &amp;context)</div><div class="ttdef"><b>Definition:</b> <a href="wasm__interface_8cpp_source.html#l00054">wasm_interface.cpp:54</a></div></div>
<div class="ttc" id="structeosio_1_1chain_1_1setcode_html"><div class="ttname"><a href="structeosio_1_1chain_1_1setcode.html">eosio::chain::setcode</a></div><div class="ttdef"><b>Definition:</b> <a href="contract__types_8hpp_source.html#l00027">contract_types.hpp:27</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue May 29 2018 17:40:53 for Eos by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
